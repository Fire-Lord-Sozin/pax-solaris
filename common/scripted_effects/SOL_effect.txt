SOL_calculate_loyalty = {
	if = {
		limit = {
			tag = event_target:solar_empire
			is_SOLAR_EMPIRE = yes
			has_country_flag = march_on_canterlot
		}

		#GENERAL PUBLIC 
		clamp_variable = {
			var = daybreaker_support
			min = 0
			max = 100
		}
		set_variable = { var = solar_popular_support value = 0 }
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 10
					compare = greater_than_or_equals
				}
			}
			add_to_variable = { var = solar_popular_support value = 1 }
		}
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 30
					compare = greater_than_or_equals
				}
			}
			add_to_variable = { var = solar_popular_support value = 1 }
		}
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 50
					compare = greater_than_or_equals
				}
			}
			add_to_variable = { var = solar_popular_support value = 1 }
		}
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 70
					compare = greater_than_or_equals
				}
			}
			add_to_variable = { var = solar_popular_support value = 1 }
		}
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 90
					compare = greater_than_or_equals
				}
			}
			add_to_variable = { var = solar_popular_support value = 1 }
		}

		if = {
			limit = { NOT = { has_country_flag = resistance_ceasefire } }
			#THE CIVILIAN RESISTANCE
			set_variable = { var = solar_civilian_support value = 0 }
			add_to_variable = {
				var = solar_civilian_support
				value = solar_popular_support
			}
			add_to_variable = {
				var = solar_civilian_support
				value = solar_civilian_measures
			}
			add_to_variable = {
				var = solar_civilian_support
				value = solar_civilian_resistance_actions
			}
			clamp_variable = {
				var = solar_civilian_support
				min = 0
				max = 5
			}
			if = {
				limit = { 
					check_variable = { solar_civilian_support = 0 } 
				}
				remove_ideas = SOL_public_hostility_5
				add_ideas = SOL_public_hostility_5
				remove_ideas = SOL_public_hostility_4
				remove_ideas = SOL_public_hostility_3
				remove_ideas = SOL_public_hostility_2
				remove_ideas = SOL_public_hostility_1
				remove_ideas = SOL_public_hostility_0
			}
			if = {
				limit = { 
					check_variable = { solar_civilian_support = 1 } 
				}
				remove_ideas = SOL_public_hostility_4
				remove_ideas = SOL_public_hostility_5
				add_ideas = SOL_public_hostility_4
				remove_ideas = SOL_public_hostility_3
				remove_ideas = SOL_public_hostility_2
				remove_ideas = SOL_public_hostility_1
				remove_ideas = SOL_public_hostility_0
			}
			if = {
				limit = { 
					check_variable = { solar_civilian_support = 2 } 
				}
				remove_ideas = SOL_public_hostility_3
				remove_ideas = SOL_public_hostility_5
				remove_ideas = SOL_public_hostility_4
				add_ideas = SOL_public_hostility_3
				remove_ideas = SOL_public_hostility_2
				remove_ideas = SOL_public_hostility_1
				remove_ideas = SOL_public_hostility_0
			}
			if = {
				limit = { 
					check_variable = { solar_civilian_support = 3 } 
				}
				remove_ideas = SOL_public_hostility_2
				remove_ideas = SOL_public_hostility_5
				remove_ideas = SOL_public_hostility_4
				remove_ideas = SOL_public_hostility_3
				add_ideas = SOL_public_hostility_2
				remove_ideas = SOL_public_hostility_1
				remove_ideas = SOL_public_hostility_0
			}
			if = {
				limit = { 
					check_variable = { solar_civilian_support = 4 } 
				}
				remove_ideas = SOL_public_hostility_1
				remove_ideas = SOL_public_hostility_5
				remove_ideas = SOL_public_hostility_4
				remove_ideas = SOL_public_hostility_3
				remove_ideas = SOL_public_hostility_2
				add_ideas = SOL_public_hostility_1
				remove_ideas = SOL_public_hostility_0
			}
			if = {
				limit = { 
					check_variable = { solar_civilian_support = 5 } 
				}
				remove_ideas = SOL_public_hostility_0
				remove_ideas = SOL_public_hostility_5
				remove_ideas = SOL_public_hostility_4
				remove_ideas = SOL_public_hostility_3
				remove_ideas = SOL_public_hostility_2
				remove_ideas = SOL_public_hostility_1
				add_ideas = SOL_public_hostility_0
			}

			#MILITARY RESISTANCE

			set_variable = { var = solar_military_support_temp value = solar_military_support }
			set_variable = { var = solar_military_support value = 0 }
			add_to_variable = {
				var = solar_military_support
				value = solar_popular_support
			}
			add_to_variable = {
				var = solar_military_support
				value = solar_military_measures
			}
			add_to_variable = {
				var = solar_military_support
				value = solar_military_resistance_actions
			}
			clamp_variable = {
				var = solar_military_support
				min = 0
				max = 5
			}
			if = {
				limit = { 
					check_variable = { solar_military_support = 0 } 
				}
				remove_ideas = SOL_military_desertion_5
				add_ideas = SOL_military_desertion_5
				remove_ideas = SOL_military_desertion_4
				remove_ideas = SOL_military_desertion_3
				remove_ideas = SOL_military_desertion_2
				remove_ideas = SOL_military_desertion_1
				remove_ideas = SOL_military_desertion_0
				set_variable = { var = sol_border_porosity_factor_military_consolidation value = 0.02 }
			}
			if = {
				limit = { 
					check_variable = { solar_military_support = 1 } 
				}
				remove_ideas = SOL_military_desertion_4
				remove_ideas = SOL_military_desertion_5
				add_ideas = SOL_military_desertion_4
				remove_ideas = SOL_military_desertion_3
				remove_ideas = SOL_military_desertion_2
				remove_ideas = SOL_military_desertion_1
				remove_ideas = SOL_military_desertion_0
				set_variable = { var = sol_border_porosity_factor_military_consolidation value = 0.016 }
			}
			if = {
				limit = { 
					check_variable = { solar_military_support = 2 } 
				}
				remove_ideas = SOL_military_desertion_3
				remove_ideas = SOL_military_desertion_5
				remove_ideas = SOL_military_desertion_4
				add_ideas = SOL_military_desertion_3
				remove_ideas = SOL_military_desertion_2
				remove_ideas = SOL_military_desertion_1
				remove_ideas = SOL_military_desertion_0
				set_variable = { var = sol_border_porosity_factor_military_consolidation value = 0.012 }
			}
			if = {
				limit = { 
					check_variable = { solar_military_support = 3 } 
				}
				remove_ideas = SOL_military_desertion_2
				remove_ideas = SOL_military_desertion_5
				remove_ideas = SOL_military_desertion_4
				remove_ideas = SOL_military_desertion_3
				add_ideas = SOL_military_desertion_2
				remove_ideas = SOL_military_desertion_1
				remove_ideas = SOL_military_desertion_0
				set_variable = { var = sol_border_porosity_factor_military_consolidation value = 0.008 }
			}
			if = {
				limit = { 
					check_variable = { solar_military_support = 4 } 
				}
				remove_ideas = SOL_military_desertion_1
				remove_ideas = SOL_military_desertion_5
				remove_ideas = SOL_military_desertion_4
				remove_ideas = SOL_military_desertion_3
				remove_ideas = SOL_military_desertion_2
				add_ideas = SOL_military_desertion_1
				remove_ideas = SOL_military_desertion_0
				set_variable = { var = sol_border_porosity_factor_military_consolidation value = 0.004 }
			}
			if = {
				limit = { 
					check_variable = { solar_military_support = 5 } 
				}
				remove_ideas = SOL_military_desertion_0
				remove_ideas = SOL_military_desertion_5
				remove_ideas = SOL_military_desertion_4
				remove_ideas = SOL_military_desertion_3
				remove_ideas = SOL_military_desertion_2
				remove_ideas = SOL_military_desertion_1
				add_ideas = SOL_military_desertion_0
				set_variable = { var = sol_border_porosity_factor_military_consolidation value = 0 }
			}

			if = {
				limit = {
					NOT = { check_variable = { solar_military_support_temp = solar_military_support } }
				}
				SOL_calculate_border_porosity = yes
			}
			#RESISTANCE COUNTER-ACTIVITY
			clamp_variable = {
				var = solar_civilian_measures_progress
				min = 0
			}
			clamp_variable = {
				var = solar_military_measures_progress
				min = 0
			}
			clamp_variable = {
				var = solar_resistance_actions_progress
				min = 0
				max = 5
			}
			clamp_variable = {
				var = solar_resistance_outreach_actions_progress
				min = 0
				max = 5
			}
			clamp_variable = {
				var = solar_resistance_cohesion_actions_progress
				min = 0
				max = 5
			}
			if = {
				limit = { 
					check_variable = { solar_resistance_actions_progress > 4 } 
					NOT = { check_variable = { solar_resistance_strength = 5 } }
				}
				add_to_variable = { var = solar_resistance_actions value = 1 }
				set_variable = { var = solar_resistance_actions_progress value = 0 }
			}
			if = {
				limit = { 
					check_variable = { solar_resistance_outreach_actions_progress > 4 } 
					NOT = { check_variable = { solar_resistance_outreach_strength = 5 } }
				}
				add_to_variable = { var = solar_resistance_outreach_actions value = 1 }
				set_variable = { var = solar_resistance_outreach_actions_progress value = 0 }
			}
			if = {
				limit = { 
					check_variable = { solar_resistance_cohesion_actions_progress > 4 } 
					NOT = { check_variable = { solar_resistance_cohesion = 3 } }
				}
				add_to_variable = { var = solar_resistance_cohesion_actions value = 1 }
				set_variable = { var = solar_resistance_cohesion_actions_progress value = 0 }
			}

			#HARMONY RESTORATION MOVEMENT STRENGTH

			set_variable = { var = solar_resistance_strength_temp value = solar_resistance_strength }
			set_variable = { var = solar_resistance_strength value = 0 }
			add_to_variable = {
				var = solar_resistance_strength
				value = solar_initial_resistance_strength
			}
			add_to_variable = {
				var = solar_resistance_strength
				value = solar_resistance_suppression
			}
			add_to_variable = {
				var = solar_resistance_strength
				value = solar_resistance_actions
			}
			clamp_variable = {
				var = solar_resistance_strength
				min = 0
				max = 5
			}
			if = {
				limit = { 
					has_country_flag = SOL_resistance_begins
					NOT = { has_country_flag = SOL_mop_up_the_remnants_active }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_strength = 0 } 
					}
					remove_ideas = SOL_resistance_strength_0
					add_ideas = SOL_resistance_strength_0
					remove_ideas = SOL_resistance_strength_1
					remove_ideas = SOL_resistance_strength_2
					remove_ideas = SOL_resistance_strength_3
					remove_ideas = SOL_resistance_strength_4
					remove_ideas = SOL_resistance_strength_5
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_strength = 1 } 
					}
					remove_ideas = SOL_resistance_strength_1
					remove_ideas = SOL_resistance_strength_0
					add_ideas = SOL_resistance_strength_1
					remove_ideas = SOL_resistance_strength_2
					remove_ideas = SOL_resistance_strength_3
					remove_ideas = SOL_resistance_strength_4
					remove_ideas = SOL_resistance_strength_5
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_strength = 2 } 
					}
					remove_ideas = SOL_resistance_strength_2
					remove_ideas = SOL_resistance_strength_0
					remove_ideas = SOL_resistance_strength_1
					add_ideas = SOL_resistance_strength_2
					remove_ideas = SOL_resistance_strength_3
					remove_ideas = SOL_resistance_strength_4
					remove_ideas = SOL_resistance_strength_5
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_strength = 3 } 
					}
					remove_ideas = SOL_resistance_strength_3
					remove_ideas = SOL_resistance_strength_0
					remove_ideas = SOL_resistance_strength_1
					remove_ideas = SOL_resistance_strength_2
					add_ideas = SOL_resistance_strength_3
					remove_ideas = SOL_resistance_strength_4
					remove_ideas = SOL_resistance_strength_5
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_strength = 4 } 
					}
					remove_ideas = SOL_resistance_strength_4
					remove_ideas = SOL_resistance_strength_0
					remove_ideas = SOL_resistance_strength_1
					remove_ideas = SOL_resistance_strength_2
					remove_ideas = SOL_resistance_strength_3
					add_ideas = SOL_resistance_strength_4
					remove_ideas = SOL_resistance_strength_5
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_strength = 5 } 
					}
					remove_ideas = SOL_resistance_strength_5
					remove_ideas = SOL_resistance_strength_0
					remove_ideas = SOL_resistance_strength_1
					remove_ideas = SOL_resistance_strength_2
					remove_ideas = SOL_resistance_strength_3
					remove_ideas = SOL_resistance_strength_4
					add_ideas = SOL_resistance_strength_5
				}
			}

			if = {
				limit = {
					NOT = { check_variable = { solar_resistance_strength_temp = solar_resistance_strength } }
					has_global_flag = coalition_recognise_hrm_completed
				}
				SOL_coalition_hrn_collaboration = yes
			}
			#RESISTANCE OUTREACH STRENGTH

			set_variable = { var = solar_resistance_outreach_strength value = 0 }
			add_to_variable = {
				var = solar_resistance_outreach_strength
				value = solar_initial_resistance_outreach_strength
			}
			add_to_variable = {
				var = solar_resistance_outreach_strength
				value = solar_resistance_outreach_suppression
			}
			add_to_variable = {
				var = solar_resistance_outreach_strength
				value = solar_resistance_outreach_actions
			}
			clamp_variable = {
				var = solar_resistance_outreach_strength
				min = 0
				max = 5
			}
			if = {
				limit = { 
					has_country_flag = SOL_resistance_begins
					NOT = { has_country_flag = SOL_mop_up_the_remnants_active }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_outreach_strength = 0 } 
					}
					remove_ideas = SOL_harmonist_broadcasts_0
					add_ideas = SOL_harmonist_broadcasts_0
					remove_ideas = SOL_harmonist_broadcasts_1
					remove_ideas = SOL_harmonist_broadcasts_2
					remove_ideas = SOL_harmonist_broadcasts_3
					remove_ideas = SOL_harmonist_broadcasts_4
					remove_ideas = SOL_harmonist_broadcasts_5
					set_variable = { var = daybreaker_support_daily_resistance_outreach value = 0 }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_outreach_strength = 1 } 
					}
					remove_ideas = SOL_harmonist_broadcasts_1
					remove_ideas = SOL_harmonist_broadcasts_0
					add_ideas = SOL_harmonist_broadcasts_1
					remove_ideas = SOL_harmonist_broadcasts_2
					remove_ideas = SOL_harmonist_broadcasts_3
					remove_ideas = SOL_harmonist_broadcasts_4
					remove_ideas = SOL_harmonist_broadcasts_5
					set_variable = { var = daybreaker_support_daily_resistance_outreach value = -0.02 }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_outreach_strength = 2 } 
					}
					remove_ideas = SOL_harmonist_broadcasts_2
					remove_ideas = SOL_harmonist_broadcasts_0
					remove_ideas = SOL_harmonist_broadcasts_1
					add_ideas = SOL_harmonist_broadcasts_2
					remove_ideas = SOL_harmonist_broadcasts_3
					remove_ideas = SOL_harmonist_broadcasts_4
					remove_ideas = SOL_harmonist_broadcasts_5
					set_variable = { var = daybreaker_support_daily_resistance_outreach value = -0.04 }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_outreach_strength = 3 } 
					}
					remove_ideas = SOL_harmonist_broadcasts_3
					remove_ideas = SOL_harmonist_broadcasts_0
					remove_ideas = SOL_harmonist_broadcasts_1
					remove_ideas = SOL_harmonist_broadcasts_2
					add_ideas = SOL_harmonist_broadcasts_3
					remove_ideas = SOL_harmonist_broadcasts_4
					remove_ideas = SOL_harmonist_broadcasts_5
					set_variable = { var = daybreaker_support_daily_resistance_outreach value = -0.06 }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_outreach_strength = 4 } 
					}
					remove_ideas = SOL_harmonist_broadcasts_4
					remove_ideas = SOL_harmonist_broadcasts_0
					remove_ideas = SOL_harmonist_broadcasts_1
					remove_ideas = SOL_harmonist_broadcasts_2
					remove_ideas = SOL_harmonist_broadcasts_3
					add_ideas = SOL_harmonist_broadcasts_4
					remove_ideas = SOL_harmonist_broadcasts_5
					set_variable = { var = daybreaker_support_daily_resistance_outreach value = -0.08 }
				}
				if = {
					limit = { 
						check_variable = { solar_resistance_outreach_strength = 5 } 
					}
					remove_ideas = SOL_harmonist_broadcasts_5
					remove_ideas = SOL_harmonist_broadcasts_0
					remove_ideas = SOL_harmonist_broadcasts_1
					remove_ideas = SOL_harmonist_broadcasts_2
					remove_ideas = SOL_harmonist_broadcasts_3
					remove_ideas = SOL_harmonist_broadcasts_4
					add_ideas = SOL_harmonist_broadcasts_5
					set_variable = { var = daybreaker_support_daily_resistance_outreach value = -0.1 }
				}
			}
			#PR Nightmare, basically the chance of news being received poorly
			set_variable = { var = pr_nightmare value = solar_resistance_outreach_strength }
			multiply_variable = { var = pr_nightmare value = 0.2 }

			#RESISTANCE COHESION
			set_variable = { var = solar_resistance_cohesion value = 0 }
			add_to_variable = {
				var = solar_resistance_cohesion
				value = solar_resistance_cohesion_suppression
			}
			add_to_variable = {
				var = solar_resistance_cohesion
				value = solar_resistance_cohesion_actions
			}
			clamp_variable = {
				var = solar_resistance_cohesion
				min = 0
				max = 3
			}
			if = {
				limit = {
					check_variable = { solar_resistance_cohesion = 0 }
				}
				remove_ideas = SOL_resistance_cohesion_1
				remove_ideas = SOL_resistance_cohesion_2
				remove_ideas = SOL_resistance_cohesion_3
			}
			if = {
				limit = {
					check_variable = { solar_resistance_cohesion = 1 }
				}
				remove_ideas = SOL_resistance_cohesion_1
				remove_ideas = SOL_resistance_cohesion_2
				remove_ideas = SOL_resistance_cohesion_3
				add_ideas = SOL_resistance_cohesion_1
			}
			if = {
				limit = {
					check_variable = { solar_resistance_cohesion = 2 }
				}
				remove_ideas = SOL_resistance_cohesion_1
				remove_ideas = SOL_resistance_cohesion_2
				remove_ideas = SOL_resistance_cohesion_3
				add_ideas = SOL_resistance_cohesion_2
			}
			if = {
				limit = {
					check_variable = { solar_resistance_cohesion = 3 }
				}
				remove_ideas = SOL_resistance_cohesion_1
				remove_ideas = SOL_resistance_cohesion_2
				remove_ideas = SOL_resistance_cohesion_3
				add_ideas = SOL_resistance_cohesion_3
			}

			if = {
				limit = { check_variable = { solar_resistance_strength = 5 } }
				set_variable = { var = solar_resistance_actions_progress value = 0 }
			}
			if = {
				limit = { check_variable = { solar_resistance_outreach_strength = 5 } }
				set_variable = { var = solar_resistance_outreach_actions_progress value = 0 }
			}
			if = {
				limit = { check_variable = { solar_resistance_cohesion = 3 } }
				set_variable = { var = solar_resistance_cohesion_actions_progress value = 0 }
			}

			if = {
				limit = {
					NOT = { has_country_flag = SOL_has_ongoing_attack }
					NOT = { has_country_flag = resistance_ceasefire }
					NOT = { check_variable = { resistance_attack_blocked > 0 } }
					check_variable = { solar_resistance_strength > 0 }
					check_variable = { solar_resistance_cohesion > 0 }
					NOT = { has_country_flag = sol_resistance_decapitated }
					NOT = { has_global_flag = sol_war_of_the_eclipse_begun }
					is_ai = no
				}
				SOL_attack_reroll = yes
			}
			if = {
				limit = {
					NOT = { has_country_flag = SOL_has_ongoing_cohesion }
					NOT = { has_country_flag = resistance_ceasefire }
					NOT = { check_variable = { resistance_attack_blocked > 0 } }
					has_country_flag = cohesion_missions_active
					NOT = { has_country_flag = sol_resistance_decapitated }
					NOT = { check_variable = { solar_resistance_cohesion > 2 } }
					is_ai = no
				}
				set_country_flag = SOL_has_ongoing_cohesion
				activate_mission = SOL_resistance_cohesion
			}
			if = {
				limit = {
					check_variable = { solar_resistance_cohesion > 2 }
					check_variable = { solar_resistance_strength > 1 } 
					check_variable = { solar_resistance_outreach_strength > 1 }
					NOT = { has_country_flag = resistance_ceasefire } 
					NOT = { check_variable = { resistance_attack_blocked > 0 } }
					NOT = { has_country_flag = sol_block_hrm_uprising }
					NOT = { has_global_flag = sol_war_of_the_eclipse_begun }
					NOT = { HRM = { exists = yes } }
					NOT = { has_game_rule = { rule = SOL_HRM_OUTCOME option = SOL_HRM_SUCCESS } }
				}
				set_global_flag = sol_war_of_the_eclipse_begun
				country_event = { id = paxsolaris.265 hours = 2 }
			}
		}
		#THE PROGRESS BAR
		set_variable = { var = daybreaker_support_progress_bar_pos value = daybreaker_support }
		multiply_variable = { var = daybreaker_support_progress_bar_pos value = 4 }
		add_to_variable = { var = daybreaker_support_progress_bar_pos value = -400 }
		round_variable = daybreaker_support_progress_bar_pos

		#DAILY LOYALTY
		if = {
			limit = {
				has_defensive_war = yes
			}
			SOL_calculate_invasion_loyalty = yes
			remove_ideas = SOL_invasion_loyalty
			add_ideas = SOL_invasion_loyalty
		}
		else = {
			if = {
				limit = { check_variable = { daybreaker_support_daily_invasion > 0 } }
				SOL_calculate_invasion_loyalty = yes
			}
			if = {
				limit = { has_idea = SOL_invasion_loyalty }
				remove_ideas = SOL_invasion_loyalty
			}
		}
		set_variable = { var = daybreaker_support_daily value = 0 }
		add_to_variable = {
			var = daybreaker_support_daily
			value = daybreaker_support_daily_propaganda
		}
		add_to_variable = {
			var = daybreaker_support_daily
			value = daybreaker_support_daily_resistance_outreach
		}
		add_to_variable = {
			var = daybreaker_support_daily
			value = daybreaker_support_daily_actions
		}
		add_to_variable = {
			var = daybreaker_support_daily
			value = daybreaker_support_daily_laws
		}
		add_to_variable = {
			var = daybreaker_support_daily
			value = daybreaker_support_daily_invasion
		}
		
		#WEEKLY LEADS
		set_variable = { var = weekly_leads value = 0 }
		add_to_variable = {
			var = weekly_leads
			value = weekly_leads_modifier
		}
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 80
					compare = greater_than_or_equals
				}
				has_country_flag = SOL_unlocked_harmonist_commanders
				has_country_flag = SOL_harmonic_commanders_leave
			}
			clr_country_flag = SOL_harmonic_commanders_leave
			country_event = paxsolaris.330
		}
		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 60
					compare = greater_than_or_equals
				}
				has_country_flag = SOL_unlocked_inquisition_informants
			}
			add_to_variable = { var = weekly_leads value = 2 }
		}

		if = {
			limit = { 
				check_variable = { 
					var = daybreaker_support 
					value = 20
					compare = greater_than_or_equals
				}
				has_country_flag = SOL_unlocked_info_network
			}
			set_country_flag = civilian_informants
		}
		else = {
			clr_country_flag = civilian_informants
		}
		SOL_calculate_division_requirements = yes

		SOL_anti_daybreaker_attack_bonus = yes
	}
}
SOL_calculate_probability = {
	random_list = {
		1 = { set_variable = { var = probability_check value = 0.0 } }
		1 = { set_variable = { var = probability_check value = 0.1 } }
		1 = { set_variable = { var = probability_check value = 0.2 } }
		1 = { set_variable = { var = probability_check value = 0.3 } }
		1 = { set_variable = { var = probability_check value = 0.4 } }
		1 = { set_variable = { var = probability_check value = 0.5 } }
		1 = { set_variable = { var = probability_check value = 0.6 } }
		1 = { set_variable = { var = probability_check value = 0.7 } }
		1 = { set_variable = { var = probability_check value = 0.8 } }
		1 = { set_variable = { var = probability_check value = 0.9 } }
	}
	random_list = {
		1 = { add_to_variable = { var = probability_check value = 0.00 } }
		1 = { add_to_variable = { var = probability_check value = 0.01 } }
		1 = { add_to_variable = { var = probability_check value = 0.02 } }
		1 = { add_to_variable = { var = probability_check value = 0.03 } }
		1 = { add_to_variable = { var = probability_check value = 0.04 } }
		1 = { add_to_variable = { var = probability_check value = 0.05 } }
		1 = { add_to_variable = { var = probability_check value = 0.06 } }
		1 = { add_to_variable = { var = probability_check value = 0.07 } }
		1 = { add_to_variable = { var = probability_check value = 0.08 } }
		1 = { add_to_variable = { var = probability_check value = 0.09 } }
	}
}

SOL_calculate_leads_small = {
	random_list = {
		0.5 = {
			set_variable = { var = lead_counter value = 3 }
		}
		1 = {
			set_variable = { var = lead_counter value = 4 }
		}
		2 = {
			set_variable = { var = lead_counter value = 5 }
		}
		1 = {
			set_variable = { var = lead_counter value = 6 }
		}
		0.5 = {
			set_variable = { var = lead_counter value = 7 }
		}
	}
	set_variable = { var = lead_multiplier value = 1 }
	if = {
		limit = { has_country_flag = inquisition_additional_leads }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	if = {
		limit = { has_country_flag = sol_trials_brutal_interrogations }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	multiply_variable = { lead_counter = lead_multiplier }
	round_variable = lead_counter
}
SOL_calculate_leads_medium = {
	random_list = {
		0.25 = {
			modifier = {
				factor = 0.5
				has_country_flag = inquisition_additional_leads
			}
			set_variable = { var = lead_counter value = 15 }
		}
		0.5 = {
			modifier = {
				factor = 0.5
				has_country_flag = inquisition_additional_leads
			}
			set_variable = { var = lead_counter value = 17 }
		}
		1 = {
			modifier = {
				factor = 0.5
				has_country_flag = inquisition_additional_leads
			}
			set_variable = { var = lead_counter value = 19 }
		}
		2 = {
			set_variable = { var = lead_counter value = 21 }
		}
		1 = {
			set_variable = { var = lead_counter value = 23 }
		}
		0.5 = {
			set_variable = { var = lead_counter value = 25 }
		}
		0.25 = {
			set_variable = { var = lead_counter value = 27 }
		}
	}
	set_variable = { var = lead_multiplier value = 1 }
	if = {
		limit = { has_country_flag = inquisition_additional_leads }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	if = {
		limit = { has_country_flag = sol_trials_brutal_interrogations }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	multiply_variable = { lead_counter = lead_multiplier }
	round_variable = lead_counter
}
SOL_calculate_leads_large = {
	random_list = {
		0.25 = {
			modifier = {
				factor = 0.5
				has_country_flag = inquisition_additional_leads
			}
			set_variable = { var = lead_counter value = 35 }
		}
		0.5 = {
			modifier = {
				factor = 0.5
				has_country_flag = inquisition_additional_leads
			}
			set_variable = { var = lead_counter value = 38 }
		}
		1 = {
			modifier = {
				factor = 0.5
				has_country_flag = inquisition_additional_leads
			}
			set_variable = { var = lead_counter value = 41 }
		}
		2 = {
			set_variable = { var = lead_counter value = 44 }
		}
		1 = {
			set_variable = { var = lead_counter value = 47 }
		}
		0.5 = {
			set_variable = { var = lead_counter value = 50 }
		}
		0.25 = {
			set_variable = { var = lead_counter value = 53 }
		}
	}
	set_variable = { var = lead_multiplier value = 1 }
	if = {
		limit = { has_country_flag = inquisition_additional_leads }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	if = {
		limit = { has_country_flag = sol_trials_brutal_interrogations }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	multiply_variable = { lead_counter = lead_multiplier }
	round_variable = lead_counter
}
SOL_calculate_leads_huge = {
	random_list = {
		0.25 = {
			set_variable = { var = lead_counter value = 61 }
		}
		0.5 = {
			set_variable = { var = lead_counter value = 64 }
		}
		1 = {
			set_variable = { var = lead_counter value = 67 }
		}
		2 = {
			set_variable = { var = lead_counter value = 70 }
		}
		1 = {
			set_variable = { var = lead_counter value = 73 }
		}
		0.5 = {
			set_variable = { var = lead_counter value = 76 }
		}
		0.25 = {
			set_variable = { var = lead_counter value = 79 }
		}
	}
	set_variable = { var = lead_multiplier value = 1 }
	if = {
		limit = { has_country_flag = inquisition_additional_leads }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	if = {
		limit = { has_country_flag = sol_trials_brutal_interrogations }
		add_to_variable = { var = lead_multiplier value = 0.2 }
	}
	multiply_variable = { lead_counter = lead_multiplier }
	round_variable = lead_counter
}
SOL_calculate_resistance_target = {
	random_list = {
		20 = {
			random_owned_controlled_state = {
				limit = {
					check_variable = { SOL_public_works_region_id < 11 }
					SOL_eligible_for_state_events = yes
					NOT = { state = event_target:SOL_resistance_stronghold }
					distance_to = {
						value < 200
						target = event_target:SOL_resistance_stronghold
					}
				}
				save_global_event_target_as = SOL_resistance_activity
			}
		}
		60 = {
			random_owned_controlled_state = {
				limit = {
					check_variable = { SOL_public_works_region_id < 11 }
					SOL_eligible_for_state_events = yes
					NOT = { state = event_target:SOL_resistance_stronghold }
					distance_to = {
						value > 200
						target = event_target:SOL_resistance_stronghold
					}
					distance_to = {
						value < 800
						target = event_target:SOL_resistance_stronghold
					}
				}
				save_global_event_target_as = SOL_resistance_activity
			}
		}
		20 = {
			random_owned_controlled_state = {
				limit = {
					check_variable = { SOL_public_works_region_id < 11 }
					SOL_eligible_for_state_events = yes
					NOT = { state = event_target:SOL_resistance_stronghold }
					distance_to = {
						value > 800
						target = event_target:SOL_resistance_stronghold
					}
				}
				save_global_event_target_as = SOL_resistance_activity
			}
		}
	}
	event_target:SOL_resistance_activity = { set_state_flag = sol_past_resistance_activity }
}
SOL_calculate_magic = {
	if = {
		limit = {
			original_tag = EQS
			tag = event_target:solar_empire
			is_SOLAR_EMPIRE = yes
		}
		clamp_variable = {
			var = daybreaker_magic_reserves
			min = 0 
			max = daybreaker_magic_max
		}
		if = {
			limit = { 
				check_variable = { daybreaker_skill_lv < 25 } 
				check_variable = { 
					var = daybreaker_current_exp 
					value = daybreaker_exp_to_lv
					compare = greater_than_or_equals
				}
			}
			add_to_variable = { var = daybreaker_skill_lv value = 1 }
			add_to_variable = { var = sol_magic_perk_point_num value = 1 }
			if = {
				limit = { NOT = { check_variable = { daybreaker_skill_lv > 24 } } }
				subtract_from_variable = { var = daybreaker_current_exp value = daybreaker_exp_to_lv }
				add_to_variable = { var = daybreaker_exp_to_lv value = 10 }
			}
		}
		if = {
			limit = { 
				check_variable = { daybreaker_skill_lv > 24 } 
			}
			clamp_variable = {
				var = daybreaker_current_exp 
				min = 0 
				max = daybreaker_exp_to_lv
			}
		}
		
		#Magic bar position
		set_variable = { var = sol_magic_stored_progress_bar_pos value = 370 }
		set_temp_variable = { var = daybreaker_magic_progress_bar_pos_temp value = daybreaker_magic_reserves }
		divide_temp_variable = { var = daybreaker_magic_progress_bar_pos_temp value = daybreaker_magic_max }
		multiply_temp_variable = { var = daybreaker_magic_progress_bar_pos_temp value = 370 }
		round_temp_variable = daybreaker_magic_progress_bar_pos_temp
		subtract_from_variable = { var = sol_magic_stored_progress_bar_pos value = daybreaker_magic_progress_bar_pos_temp }

		#Skill bar position
		set_variable = { var = sol_magic_exp_progress_bar_pos value = -310 }
		set_temp_variable = { var = daybreaker_magic_progress_bar_pos_temp value = daybreaker_current_exp }
		divide_temp_variable = { var = daybreaker_magic_progress_bar_pos_temp value = daybreaker_exp_to_lv }
		multiply_temp_variable = { var = daybreaker_magic_progress_bar_pos_temp value = 310 }
		round_temp_variable = daybreaker_magic_progress_bar_pos_temp
		add_to_variable = { var = sol_magic_exp_progress_bar_pos value = daybreaker_magic_progress_bar_pos_temp }
		if = {
			limit = { has_variable = sol_magic_screen_show }
			add_to_variable = { var = sol_magic_screen_show value = 1 }
		}
		if = {
			limit = { has_variable = sol_display_state_decisions }
			add_to_variable = { sol_display_state_decisions = 1 }
		}
	}
}
SOL_initialise_public_works = {
	set_country_flag = sol_has_unlocked_public_works

	set_variable = { var = sol_public_works_loyalty_increase value = 2 }
	set_variable = { var = sol_public_works_duration value = 250 }
	set_variable = { var = sol_public_works_cost_per_state value = 1 }

	set_variable = { var = sol_urban_planning_loyalty_increase value = 1 }
	set_variable = { var = sol_urban_planning_duration value = 200 }
	set_variable = { var = sol_urban_planning_cost_per_state value = 0.8 }

	set_variable = { var = sol_agmech_loyalty_increase value = 2 }
	set_variable = { var = sol_agmech_duration value = 250 }
	set_variable = { var = sol_agmech_cost_per_state value = 0.8 }
	set_variable = { var = SOL_mechanised_agriculture_bonus_civ_use value = 0 }
	set_variable = { var = SOL_mechanised_agriculture_bonus_supply_use value = 0 }
	set_variable = { var = SOL_mechanised_agriculture_bonus_monthly_pop value = 0 }
	add_dynamic_modifier = { modifier = SOL_mechanised_agriculture_bonus }

	set_variable = { var = sol_infrastructure_hardening_duration value = 60 }
	set_variable = { var = sol_infrastructure_hardening_cost_per_state value = 1.6 }

	set_variable = { var = sol_strat_tele_duration value = 80 }
	set_variable = { var = sol_strat_tele_cost_per_state value = 1.2 }

	set_variable = { var = sol_modern_national_development_duration value = 300 }
	set_variable = { var = sol_modern_national_development_cost_per_state value = 0.8 }
}
SOL_set_state_flags_for_public_works = {
	clear_array = SOL_region_array
	clear_array = SOL_public_works_num_states
	set_temp_variable = { SOL_num_states_this_region = 0 }
	set_variable = { SOL_greater_equestria_num_states = 0 }
	every_state = {
		limit = {
			OR = {
				state = 97
				state = 63
				state = 84
				state = 2
				state = 1
				state = 5
				state = 65
				state = 39
				state = 3
				state = 68
				state = 99
				state = 128
				state = 129
				state = 121
				state = 123
				state = 122
				state = 120
				state = 113
				state = 116
				state = 115
				state = 112
				state = 111
				state = 117
				state = 114
				state = 101
				state = 105
				state = 103
				state = 104
				state = 171
				state = 179
				state = 327
			}
		}
		set_variable = { SOL_public_works_region_id = 1 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^1 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 1 }
	every_state = {
		limit = {
			OR = {
				state = 106
				state = 29
				state = 109
				state = 12
				state = 107
				state = 185
				state = 108
				state = 110
				state = 188
				state = 186
				state = 75
				state = 187
				state = 223
				state = 226
				state = 349
				state = 184
				state = 230
				state = 231
				state = 232
				state = 227
				state = 228
				state = 525
			}
		}
		set_variable = { SOL_public_works_region_id = 2 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^2 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 2 }
	every_state = {
		limit = {
			OR = {
				state = 180
				state = 181
				state = 70
				state = 134
				state = 135
				state = 56
				state = 176
				state = 183
				state = 102
				state = 178
				state = 177
				state = 74
				state = 182
				state = 40
			}
		}
		set_variable = { SOL_public_works_region_id = 3 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^3 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 3 }
	every_state = {
		limit = {
			OR = {
				state = 96
				state = 127
				state = 124
				state = 125
				state = 95
				state = 119
				state = 118
				state = 41
				state = 66
				state = 100
				state = 87
				state = 38
				state = 94
			}
		}
		set_variable = { SOL_public_works_region_id = 4 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^4 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 4 }
	every_state = {
		limit = {
			OR = {
				state = 48
				state = 18
				state = 46
				state = 59
				state = 60
				state = 61
				state = 130
				state = 132
				state = 126
				state = 170
				state = 169
				state = 54
				state = 133
				state = 73
				state = 72
				state = 45
				state = 14
				state = 173
				state = 174
				state = 175
				state = 172
				state = 138
				state = 136
				state = 137
				state = 131
			}
		}
		set_variable = { SOL_public_works_region_id = 5 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^5 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 5 }
	every_state = {
		limit = {
			OR = {
				state = 22
				state = 23
				state = 19
				state = 80
				state = 85
				state = 93
				state = 89
				state = 21
				state = 20
				state = 78
				state = 92
				state = 91
				state = 43
				state = 44
				state = 42
				state = 51
				state = 71
				state = 47
				state = 49
			}
		}
		set_variable = { SOL_public_works_region_id = 6 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^6 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 6 }
	every_state = {
		limit = {
			OR = {
				state = 28
				state = 27
				state = 82
				state = 13
				state = 90
				state = 37
				state = 17
				state = 31
				state = 88
				state = 16
				state = 24
				state = 350
				state = 30
				state = 36
				state = 25
				state = 83
				state = 79
				state = 52
				state = 353
				state = 32
				state = 81
				state = 35
				state = 221
				state = 50
				state = 86
				state = 15
				state = 26
				state = 348
				state = 33
				state = 351
				state = 34
				state = 352
			}
		}
		set_variable = { SOL_public_works_region_id = 7 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^7 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 7 }
	every_state = {
		limit = {
			OR = {
				state = 318
				state = 139
				state = 343
				state = 324
				state = 143
				state = 140
				state = 77
				state = 142
				state = 146
				state = 148
				state = 147
				state = 149
				state = 144
				state = 141
				state = 55
				state = 145
				state = 53
				state = 345
				state = 344
				state = 150
				state = 64
				state = 151
				state = 152
				state = 98
				state = 236
				state = 339
			}
		}
		set_variable = { SOL_public_works_region_id = 8 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^8 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 8 }
	every_state = {
		limit = {
			OR = {
				state = 156
				state = 155
				state = 154
				state = 157
				state = 326
				state = 164
				state = 160
				state = 162
				state = 158
				state = 159
				state = 229
				state = 167
				state = 653
				state = 662
				state = 661
				state = 67
				state = 166
				state = 233
				state = 168
				state = 225
				state = 161
				state = 163
				state = 235
				state = 237
				state = 153
				state = 334
				state = 165
				state = 240
				state = 234
				state = 678
				state = 332
				state = 241
				state = 57
			}
		}
		set_variable = { SOL_public_works_region_id = 9 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^9 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 9 }
	every_state = {
		limit = {
			OR = {
				state = 364
				state = 363
				state = 362
				state = 365
				state = 361
				state = 360
				state = 355
				state = 359
				state = 358
				state = 357
				state = 356
				state = 354
			}
		}
		set_variable = { SOL_public_works_region_id = 10 }
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_public_works_num_states^10 = SOL_num_states_this_region }
	add_to_variable = { SOL_greater_equestria_num_states = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_region_array = 10 }
	every_state = {
		limit = {
			OR = {
				state = 308
				state = 260
				state = 251
				state = 309
				state = 303
				state = 304
				state = 252
				state = 310
				state = 261
				state = 305
				state = 312
				state = 311
				state = 315
				state = 262
				state = 314
				state = 264
				state = 306
				state = 313
			}
		}
		set_variable = { SOL_puppet_region_id = 1 } #North Changelingia
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^1 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 1 }
	every_state = {
		limit = {
			OR = {
				state = 323
				state = 320
				state = 322
				state = 321
				state = 249
				state = 248
				state = 250
				state = 259
				state = 258
				state = 307
				state = 316
				state = 319
				state = 247
				state = 246
				state = 291
			}
		}
		set_variable = { SOL_puppet_region_id = 2 } #South Changelingia
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^2 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 2 }
	every_state = {
		limit = {
			OR = {
				state = 302
				state = 301
				state = 299
				state = 298
				state = 294
				state = 293
				state = 300
				state = 292
				state = 214
				state = 295
				state = 297
				state = 206
				state = 204
				state = 220
				state = 213
				state = 212
				state = 201
				state = 203
				state = 202
				state = 211
				state = 209
				state = 210
				state = 76
				state = 189
				state = 194
				state = 196
				state = 192
				state = 205
				state = 191
				state = 197
				state = 193
				state = 207
				state = 200
				state = 208
				state = 199
				state = 198
				state = 195
				state = 215
				state = 219
				state = 216
				state = 218
				state = 296
				state = 217
				state = 69
				state = 224
			}
		}
		set_variable = { SOL_puppet_region_id = 3 } #Olenia
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^3 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 3 }
	every_state = {
		limit = {
			OR = {
				state = 58
				state = 338
				state = 222
				state = 239
				state = 242
				state = 238
				state = 336
				state = 337
				state = 335
				state = 245
				state = 243
				state = 279
				state = 244
				state = 287
				state = 288
			}
		}
		set_variable = { SOL_puppet_region_id = 4 } #Nova Griffonia
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^4 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 4 }
	every_state = {
		limit = {
			OR = {
				state = 255
				state = 317
				state = 254
				state = 11
				state = 267
				state = 256
				state = 257
				state = 273
				state = 270
				state = 268
				state = 346
				state = 276
				state = 275
				state = 269
				state = 274
				state = 253
				state = 341
				state = 340
				state = 342
			}
		}
		set_variable = { SOL_puppet_region_id = 5 } #Yakyakistan
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^5 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 5 }
	every_state = {
		limit = {
			OR = {
				state = 284
				state = 285
				state = 282
				state = 266
				state = 325
			}
		}
		set_variable = { SOL_puppet_region_id = 6 } #Pingland
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^6 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 6 }
	every_state = {
		limit = {
			OR = {
				state = 265
				state = 272
				state = 289
				state = 290
				state = 263
				state = 62
				state = 280
			}
		}
		set_variable = { SOL_puppet_region_id = 7 } #Polar Bears
		EQS = { add_to_temp_variable = { SOL_num_states_this_region = 1 } }
	}
	set_variable = { SOL_puppet_num_states^7 = SOL_num_states_this_region }
	set_temp_variable = { SOL_num_states_this_region = 0 }
	add_to_array = { SOL_puppet_region_array = 7 }
}
SOL_calculate_region_development = {
	set_variable = { SOL_public_works_region_development_average = 0 }
	for_each_loop = {
		array = SOL_region_array
		value = current_region
		if = {
			limit = {
				any_state = {
					AND = {
						check_variable = { SOL_public_works_region_id = EQS.current_region }
						is_controlled_by = event_target:solar_empire
					}
				}	
			}
			#CIVILIAN
			set_variable = { var = SOL_public_works_region_development_civilian^current_region value = 0 }
			add_to_variable = { 
				var = SOL_public_works_region_development_civilian^current_region
				value = solar_civilian_support 
			}
			add_to_variable = {
				var = SOL_public_works_region_development_civilian^current_region
				value = SOL_public_works_region_development_completed^current_region
			}
			add_to_variable = {
				var = SOL_public_works_region_development_civilian^current_region
				value = SOL_public_works_region_development_special^current_region
			}
			set_variable = { var = SOL_public_works_region_development_wartorn^current_region value = 0 }
			every_state = {
				limit = { 
					check_variable = { SOL_public_works_region_id = EQS.current_region } 
					has_state_flag =  SOL_wartorn_state
					is_controlled_by = EQS
				}
				EQS = { add_to_variable = { var = SOL_public_works_region_development_wartorn^current_region value = -0.25 } }
			}
			add_to_variable = {
				var = SOL_public_works_region_development_civilian^current_region
				value = SOL_public_works_region_development_wartorn^current_region
			}

			#MILITARY
			set_variable = { var = SOL_public_works_region_development_military^current_region value = 0 }
			add_to_variable = { 
				var = SOL_public_works_region_development_military^current_region
				value = solar_military_support 
			}
			set_variable = { var = SOL_public_works_region_development_occupied^current_region value = 0 }
			every_state = {
				limit = { 
					check_variable = { SOL_public_works_region_id = EQS.current_region } 
					NOT = { is_controlled_by = EQS }
					is_owned_by = EQS
					controller = { has_war_with = EQS }
				}
				EQS = { add_to_variable = { var = SOL_public_works_region_development_occupied^current_region value = -0.5 } }
			}
			add_to_variable = { 
				var = SOL_public_works_region_development_military^current_region
				value = SOL_public_works_region_development_occupied^current_region
			}
			set_variable = { var = SOL_public_works_region_development_infrastructure_hardening^current_region value = 0 }
			every_state = {
				limit = { 
					check_variable = { SOL_public_works_region_id = EQS.current_region } 
					has_dynamic_modifier = { modifier = SOL_infrastructure_hardening_bonus }
				}
				EQS = { add_to_variable = { var = SOL_public_works_region_development_infrastructure_hardening^current_region value = 0.1 } }
			}
			add_to_variable = { 
				var = SOL_public_works_region_development_military^current_region
				value = SOL_public_works_region_development_infrastructure_hardening^current_region
			}

			#RESISTANCE
			set_variable = { var = SOL_public_works_region_development_resistance^current_region value = 0 }
			set_variable = { var = solar_resistance_strength_negative value = solar_resistance_strength }
			multiply_variable = { var = solar_resistance_strength_negative value = -1 }
			add_to_variable = { 
				var = SOL_public_works_region_development_resistance^current_region
				value = solar_resistance_strength_negative
			}
			set_variable = { var = SOL_public_works_region_development_foreign^current_region value = 0 }
			every_state = {
				limit = { 
					check_variable = { SOL_public_works_region_id = EQS.current_region } 
					NOT = { is_owned_by = EQS }
				}
				EQS = { add_to_variable = { var = SOL_public_works_region_development_foreign^current_region value = -0.5 } }
			}
			add_to_variable = { 
				var = SOL_public_works_region_development_resistance^current_region
				value = SOL_public_works_region_development_foreign^current_region
			}
			set_variable = { var = SOL_public_works_region_development_overrun^current_region value = 0 }
			every_state = {
				limit = { 
					check_variable = { SOL_public_works_region_id = EQS.current_region } 
					is_controlled_by = EQS
					NOT = { is_core_of = EQS }
				}
				EQS = { add_to_variable = { var = SOL_public_works_region_development_overrun^current_region value = -0.25 } }
			}
			add_to_variable = { 
				var = SOL_public_works_region_development_resistance^current_region
				value = SOL_public_works_region_development_overrun^current_region
			}

			#TOTAL
			set_variable = { var = SOL_public_works_region_development^current_region value = 0 }
			add_to_variable = {
				var = SOL_public_works_region_development^current_region
				value = SOL_public_works_region_development_civilian^current_region
			}
			add_to_variable = {
				var = SOL_public_works_region_development^current_region
				value = SOL_public_works_region_development_military^current_region
			}
			add_to_variable = {
				var = SOL_public_works_region_development^current_region
				value = SOL_public_works_region_development_resistance^current_region
			}
			clamp_variable = {	
				var = SOL_public_works_region_development^current_region
				min = 0 
				max = 10
			}
			if = {
				limit = { check_variable = { current_region < 11 } }
				add_to_variable = { SOL_public_works_region_development_average = SOL_public_works_region_development^current_region }
			}
			set_variable = { var = SOL_public_works_region_frame^current_region value = 2 }
			if = {
				limit = { 
					check_variable = { SOL_public_works_region_development^current_region > 2 }
				}
				set_variable = { var = SOL_public_works_region_frame^current_region value = 3 }
			}
			if = {
				limit = { 
					check_variable = { SOL_public_works_region_development^current_region > 4 }
				}
				set_variable = { var = SOL_public_works_region_frame^current_region value = 4 }
			}
			if = {
				limit = { 
					check_variable = { SOL_public_works_region_development^current_region > 6 }
				}
				set_variable = { var = SOL_public_works_region_frame^current_region value = 5 }
			}
			if = {
				limit = { 
					check_variable = {  SOL_public_works_region_development^current_region > 8 }
				}
				set_variable = { var = SOL_public_works_region_frame^current_region value = 6 }
			}
		}
		else = {
			set_variable = { var = SOL_public_works_region_frame^current_region value = 1 }
			set_variable = { var = SOL_public_works_region_development_civilian^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development_wartorn^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development_military^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development_occupied^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development_resistance^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development_foreign^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development_overrun^current_region value = 0 }
			set_variable = { var = SOL_public_works_region_development^current_region value = 0 }
		}
	}
	divide_variable = { SOL_public_works_region_development_average = 10 }
	if = {
		limit = {
			has_variable = sol_public_works_screen_show
		}
		add_to_variable = { var = sol_public_works_screen_show value = 1 }
	}
}
SOL_calculate_public_works_progress = {
	set_variable = { var = SOL_dynamic_modifier_civ_use_total value = 0 }
	if = {
		limit = { 
			NOT = {
				OR = {
					any_country = {
						sol_is_threat = yes
						has_war_with = EQS
					}
					AND = {
						has_war = yes
						surrender_progress > 0.2
					}
				}
				has_idea = SOL_worker_strikes
			}
		}
		for_each_loop = {
			array = SOL_ongoing_public_works
			value = current_region
			if = {
				limit = {
					check_variable = { SOL_public_works_duration_array^current_region > 0 }
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								AND = {
									check_variable = { SOL_public_works_region_id = EQS.current_region }
									NOT = { is_owned_and_controlled_by = EQS }
								}
							}
						}
					}
					set_variable = { var = SOL_public_works_industry_use value = sol_public_works_cost_per_state }
					multiply_variable = { var = SOL_public_works_industry_use value = SOL_public_works_num_states^current_region }
					set_variable = { var = SOL_public_works_industry_use_multiplier value = 5 }
					subtract_from_variable = { var = SOL_public_works_industry_use_multiplier value = SOL_public_works_region_development^current_region }
					divide_variable = { var = SOL_public_works_industry_use_multiplier value = 10 }
					add_to_variable = { var = SOL_public_works_industry_use_multiplier value = 1 }
					multiply_variable = { var = SOL_public_works_industry_use value = SOL_public_works_industry_use_multiplier }
					round_variable = SOL_public_works_industry_use
					add_to_variable = { var = SOL_dynamic_modifier_civ_use_total value = SOL_public_works_industry_use }
				}
			}
			else = {
				add_to_array = { array = SOL_completed_public_works value = current_region }
				add_to_variable = { var = sol_ongoing_public_works_num value = -1 }
				add_to_variable = { var = SOL_public_works_region_development_completed^current_region value = 1 }
				every_controlled_state = {
					limit = { 
						check_variable = { SOL_public_works_region_id = EQS.current_region } 
						is_owned_by = EQS
					}
					if = {
						limit = { NOT = { has_dynamic_modifier = { modifier = SOL_heart_of_an_empire } } }
						add_dynamic_modifier = { modifier = SOL_state_civilian_consolidation }
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				SOL_add_railway_to_state = yes
				add_to_variable = { var = solar_civilian_measures_progress value = 1 }
				add_to_variable = { var = daybreaker_support value = sol_public_works_loyalty_increase }
				SOL_calculate_loyalty = yes
				SOL_calculate_region_development = yes
			}
		}
		for_each_loop = {
			array = SOL_ongoing_urban_planning
			value = current_region
			if = {
				limit = {
					check_variable = { SOL_public_works_duration_array^current_region > 0 }
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								AND = {
									check_variable = { SOL_public_works_region_id = EQS.current_region }
									NOT = { is_owned_and_controlled_by = EQS }
								}
							}
						}
					}
					set_variable = { var = SOL_urban_planning_industry_use value = sol_urban_planning_cost_per_state }
					multiply_variable = { var = SOL_urban_planning_industry_use value = SOL_public_works_num_states^current_region }
					set_variable = { var = SOL_urban_planning_industry_use_multiplier value = 5 }
					subtract_from_variable = { var = SOL_urban_planning_industry_use_multiplier value = SOL_public_works_region_development^current_region }
					divide_variable = { var = SOL_urban_planning_industry_use_multiplier value = 10 }
					add_to_variable = { var = SOL_urban_planning_industry_use_multiplier value = 1 }
					multiply_variable = { var = SOL_urban_planning_industry_use value = SOL_urban_planning_industry_use_multiplier }
					round_variable = SOL_urban_planning_industry_use
					add_to_variable = { var = SOL_dynamic_modifier_civ_use_total value = SOL_urban_planning_industry_use }
				}
			}
			else = {
				add_to_array = { array = SOL_completed_urban_planning value = current_region }
				add_to_variable = { var = sol_ongoing_public_works_num value = -1 }
				add_to_variable = { var = SOL_public_works_region_development_completed^current_region value = 1 }
				SOL_urban_planning_vps_to_state = yes			
				every_controlled_state = {
					limit = { 
						check_variable = { SOL_public_works_region_id = EQS.current_region }
						is_owned_by = EQS
						OR = {
							has_state_category = town
							has_state_category = large_town
							has_state_category = city
							has_state_category = large_city
							has_state_category = metropolis
							has_state_category = megalopolis
						}
					}
					set_temp_variable = { SOL_population_to_add = state_population_k }
					multiply_temp_variable = { SOL_population_to_add = 100 }
					round_temp_variable = SOL_population_to_add
					add_manpower = SOL_population_to_add
					if = {
						limit = {
							OR = {
								has_state_category = city
								has_state_category = large_city
								has_state_category = metropolis
								has_state_category = megalopolis
							}
							NOT = { has_dynamic_modifier = { modifier = SOL_heart_of_an_empire } }
						}
						add_dynamic_modifier = { modifier = SOL_efficient_urban_planning }
					}
				}
				add_to_variable = { var = solar_civilian_measures_progress value = 1 }
				add_to_variable = { var = daybreaker_support value = sol_urban_planning_loyalty_increase }
				SOL_calculate_loyalty = yes
				SOL_calculate_region_development = yes
			}
		}
		for_each_loop = {
			array = SOL_ongoing_agmech
			value = current_region
			if = {
				limit = {
					check_variable = { SOL_public_works_duration_array^current_region > 0 }
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								AND = {
									check_variable = { SOL_public_works_region_id = EQS.current_region }
									NOT = { is_owned_and_controlled_by = EQS }
								}
							}
						}
					}
					set_variable = { var = SOL_agmech_industry_use value = sol_agmech_cost_per_state }
					multiply_variable = { var = SOL_agmech_industry_use value = SOL_public_works_num_states^current_region }
					set_variable = { var = SOL_agmech_industry_use_multiplier value = 5 }
					subtract_from_variable = { var = SOL_agmech_industry_use_multiplier value = SOL_public_works_region_development^current_region }
					divide_variable = { var = SOL_agmech_industry_use_multiplier value = 20 }
					add_to_variable = { var = SOL_agmech_industry_use_multiplier value = 1 }
					multiply_variable = { var = SOL_agmech_industry_use value = SOL_agmech_industry_use_multiplier }
					round_variable = SOL_agmech_industry_use
					add_to_variable = { var = SOL_dynamic_modifier_civ_use_total value = SOL_agmech_industry_use }
				}
			}
			else = {
				add_to_array = { array = SOL_completed_agmech value = current_region }
				add_to_variable = { var = sol_ongoing_public_works_num value = -1 }
				add_to_variable = { var = SOL_public_works_region_development_completed^current_region value = 1 }
				SOL_agmech_vps_to_state = yes
				every_controlled_state = {
					limit = { 
						check_variable = { SOL_public_works_region_id = EQS.current_region }
						is_owned_by = EQS
					}
					if = {
						limit = { state_population_k < 1 }
						EQS = { 
							SOL_calculate_probability = yes
							multiply_variable = { probability_check = 1000 }
							add_to_variable = { probability_check = 200 }
						}
						add_manpower = EQS.probability_check
					}
					set_temp_variable = { SOL_population_to_add = state_population_k }
					multiply_temp_variable = { SOL_population_to_add = 100 }
					round_temp_variable = SOL_population_to_add
					add_manpower = SOL_population_to_add
					add_extra_state_shared_building_slots = 1
					EQS = {
						add_to_variable = { var = SOL_mechanised_agriculture_bonus_civ_use value = -0.0005 }
						clamp_variable = {
							var = SOL_mechanised_agriculture_bonus_civ_use
							min = -0.05
						}
						add_to_variable = { var = SOL_mechanised_agriculture_bonus_supply_use value = -0.001 }
						clamp_variable = {
							var = SOL_mechanised_agriculture_bonus_supply_use
							min = -0.1
						}
						add_to_variable = { var = SOL_mechanised_agriculture_bonus_monthly_pop value = 0.003 }
						clamp_variable = {
							var = SOL_mechanised_agriculture_bonus_monthly_pop
							max = 0.3
						}
					}
				}
				add_to_variable = { var = solar_civilian_measures_progress value = 1 }
				add_to_variable = { var = daybreaker_support value = sol_agmech_loyalty_increase }
				SOL_calculate_loyalty = yes
				SOL_calculate_region_development = yes
			}
		}
		for_each_loop = {
			array = SOL_ongoing_modern_national_development
			value = current_region
			if = {
				limit = {
					check_variable = { SOL_public_works_duration_array^current_region > 0 }
					
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								AND = {
									has_variable = SOL_public_works_region_id
									check_variable = { SOL_public_works_region_id < 11 }
									NOT = { is_owned_and_controlled_by = EQS }
								}
							}
						}
						check_variable = { current_region = 1 }
					}
					set_variable = { var = SOL_modern_national_development_industry_use value = sol_modern_national_development_cost_per_state }
					multiply_variable = { var = SOL_modern_national_development_industry_use value = SOL_greater_equestria_num_states }
					set_variable = { var = SOL_modern_national_development_industry_use_multiplier value = 5 }
					subtract_from_variable = { var = SOL_modern_national_development_industry_use_multiplier value = SOL_public_works_region_development_average }
					divide_variable = { var = SOL_modern_national_development_industry_use_multiplier value = 10 }
					add_to_variable = { var = SOL_modern_national_development_industry_use_multiplier value = 1 }
					multiply_variable = { var = SOL_modern_national_development_industry_use value = SOL_modern_national_development_industry_use_multiplier }
					round_variable = SOL_modern_national_development_industry_use
					add_to_variable = { var = SOL_dynamic_modifier_civ_use_total value = SOL_modern_national_development_industry_use }
				}
			}
			else = {
				add_to_array = { array = SOL_completed_modern_national_development value = current_region }
				SOL_add_railway_to_state = yes
				add_to_variable = { var = sol_ongoing_public_works_num value = -1 }
				if = {
					limit = { check_variable = { current_region = 1 } }
					set_country_flag = SOL_has_completed_modern_national_development
					SOL_ultimate_public_works = yes
					every_controlled_state = {
						limit = { 
							has_variable = SOL_public_works_region_id
							check_variable = { SOL_public_works_region_id < 11 }
							is_owned_by = EQS
						}
						set_temp_variable = { SOL_population_to_add = state_population_k }
						multiply_temp_variable = { SOL_population_to_add = 100 }
						round_temp_variable = SOL_population_to_add
						add_manpower = SOL_population_to_add
						if = {
							limit = {
								OR = {
									has_state_category = city
									has_state_category = large_city
									has_state_category = metropolis
									has_state_category = megalopolis
								}
								NOT = { has_dynamic_modifier = { modifier = SOL_heart_of_an_empire } }
								NOT = { has_dynamic_modifier = { modifier = SOL_efficient_urban_planning } }
							}
							add_dynamic_modifier = { modifier = SOL_efficient_urban_planning }
						}
						add_extra_state_shared_building_slots = 2
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
				SOL_calculate_region_development = yes
			}
		}
	}
	if = {
		limit = { 
			NOT = { has_idea = SOL_worker_strikes }
		}
		for_each_loop = {
			array = SOL_ongoing_infrastructure_hardening
			value = current_region
			if = {
				limit = {
					check_variable = { SOL_public_works_duration_array^current_region > 0 }
				}
				if = {
					limit = {
						any_state = {
							AND = {
								check_variable = { SOL_public_works_region_id = EQS.currently_selected_region }
								NOT = { has_state_flag = SOL_completed_infrastructure_hardening }
								is_controlled_by = EQS
							}
						}
					}
					set_variable = { var = SOL_infrastructure_hardening_industry_use value = sol_infrastructure_hardening_cost_per_state }
					multiply_variable = { var = SOL_infrastructure_hardening_industry_use value = SOL_infrastructure_hardening_num_states_this_project^currently_selected_region }
					set_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = 5 }
					subtract_from_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
					divide_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = 25 }
					add_to_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = 1 }
					multiply_variable = { var = SOL_infrastructure_hardening_industry_use value = SOL_infrastructure_hardening_industry_use_multiplier }
					round_variable = SOL_infrastructure_hardening_industry_use
					add_to_variable = { var = SOL_dynamic_modifier_civ_use_total value = SOL_infrastructure_hardening_industry_use }
				}
			}
			else = {
				add_to_array = { array = SOL_completed_infrastructure_hardening value = current_region }
				add_to_variable = { var = sol_ongoing_public_works_num value = -1 }
				every_controlled_state = {
					limit = { 
						check_variable = { SOL_public_works_region_id = EQS.current_region }
						has_state_flag = SOL_ongoing_infrastructure_hardening 
						NOT = { has_state_flag = SOL_completed_infrastructure_hardening }
					}
					set_state_flag = SOL_completed_infrastructure_hardening 
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 4
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 9
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 14
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 19
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 24
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 29
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 34
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 39
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 44
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_victory_point > 49
						}
					}
					if = {
						limit = {
							OR = {
								has_state_category = city
								has_state_category = large_city
								has_state_category = metropolis
								has_state_category = megalopolis
							}
						}
						add_building_construction = {
							type = anti_air_building
							level = 1
							instant_build = yes
						}
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = SOL_uprising } }
						add_dynamic_modifier = { modifier = SOL_uprising_trains }
						remove_dynamic_modifier = { modifier = SOL_uprising }
					}
					if = {
						limit = { NOT = { has_dynamic_modifier = { modifier = SOL_heart_of_an_empire } } }
						add_dynamic_modifier = { modifier = SOL_infrastructure_hardening_bonus }
					}	
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								check_variable = { SOL_public_works_region_id = EQS.current_region }
								NOT = { has_state_flag = SOL_completed_infrastructure_hardening  }
							}
						}
					}
					add_to_variable = { var = solar_military_measures_progress value = 1 }
					SOL_calculate_loyalty = yes
				}
				SOL_calculate_region_development = yes
			}
		}
		for_each_loop = {
			array = SOL_ongoing_strat_tele
			value = current_region
			if = {
				limit = {
					check_variable = { SOL_public_works_duration_array^current_region > 0 }
				}
				if = {
					limit = {
						any_state = {
							AND = {
								check_variable = { SOL_public_works_region_id = EQS.currently_selected_region }
								NOT = { has_state_flag = SOL_completed_strat_tele }
								is_controlled_by = EQS
							}
						}
					}
					set_variable = { var = SOL_strat_tele_industry_use value = sol_strat_tele_cost_per_state }
					multiply_variable = { var = SOL_strat_tele_industry_use value = SOL_strat_tele_num_states_this_project^currently_selected_region }
					set_variable = { var = SOL_strat_tele_industry_use_multiplier value = 5 }
					subtract_from_variable = { var = SOL_strat_tele_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
					divide_variable = { var = SOL_strat_tele_industry_use_multiplier value = 25 }
					add_to_variable = { var = SOL_strat_tele_industry_use_multiplier value = 1 }
					multiply_variable = { var = SOL_strat_tele_industry_use value = SOL_strat_tele_industry_use_multiplier }
					round_variable = SOL_strat_tele_industry_use
					add_to_variable = { var = SOL_dynamic_modifier_civ_use_total value = SOL_strat_tele_industry_use }
				}
			}
			else = {
				add_to_array = { array = SOL_completed_strat_tele value = current_region }
				add_to_variable = { var = sol_ongoing_public_works_num value = -1 }
				every_controlled_state = {
					limit = { 
						check_variable = { SOL_public_works_region_id = EQS.current_region }
						has_state_flag = SOL_ongoing_strat_tele
						NOT = { has_state_flag = SOL_completed_strat_tele }
					}
					set_state_flag = SOL_completed_strat_tele	
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								check_variable = { SOL_public_works_region_id = EQS.current_region }
								NOT = { has_state_flag = SOL_completed_strat_tele  }
							}
						}
					}
					add_to_variable = { var = solar_military_measures_progress value = 1 }
					SOL_calculate_loyalty = yes
				}
				SOL_calculate_region_development = yes
			}
		}
	}
	for_each_loop = {
		array = SOL_completed_public_works
		value = current_region
		if = {
			limit = { is_in_array = { SOL_ongoing_public_works = current_region } }
			remove_from_array = { SOL_ongoing_public_works = current_region }
			clear_variable = sol_alert_popup_show
			set_variable = { sol_alert_title_var = 5 }
			set_variable = { sol_alert_desc_var = 12 }
			set_variable = { alert_region = current_region }
			set_variable = { var = sol_alert_popup_show value = 1 }
		}
	}
	for_each_loop = {
		array = SOL_completed_urban_planning
		value = current_region
		if = {
			limit = { is_in_array = { SOL_ongoing_urban_planning = current_region } }
			remove_from_array = { SOL_ongoing_urban_planning = current_region }
			clear_variable = sol_alert_popup_show
			set_variable = { sol_alert_title_var = 5 }
			set_variable = { sol_alert_desc_var = 12 }
			set_variable = { alert_region = current_region }
			set_variable = { var = sol_alert_popup_show value = 1 }
		}
	}
	for_each_loop = {
		array = SOL_completed_agmech
		value = current_region
		if = {
			limit = { is_in_array = { SOL_ongoing_agmech = current_region } }
			remove_from_array = { SOL_ongoing_agmech = current_region }
			clear_variable = sol_alert_popup_show
			set_variable = { sol_alert_title_var = 5 }
			set_variable = { sol_alert_desc_var = 12 }
			set_variable = { alert_region = current_region }
			set_variable = { var = sol_alert_popup_show value = 1 }
		}
	}
	for_each_loop = {
		array = SOL_completed_modern_national_development
		value = current_region
		if = {
			limit = { is_in_array = { SOL_ongoing_modern_national_development = current_region } }
			remove_from_array = { SOL_ongoing_modern_national_development = current_region }
			if = {
				limit = { check_variable = { current_region = 1 } }
				country_event = { id = paxsolaris.180 hours = 1 }
			}
		}
	}
	for_each_loop = {
		array = SOL_completed_infrastructure_hardening
		value = current_region
		if = {
			limit = { is_in_array = { SOL_ongoing_infrastructure_hardening = current_region } }
			remove_from_array = { SOL_ongoing_infrastructure_hardening = current_region }
			clear_variable = sol_alert_popup_show
			set_variable = { sol_alert_title_var = 5 }
			set_variable = { sol_alert_desc_var = 12 }
			set_variable = { alert_region = current_region }
			set_variable = { var = sol_alert_popup_show value = 1 }
		}
	}
	clear_array = SOL_completed_infrastructure_hardening
	for_each_loop = {
		array = SOL_completed_strat_tele
		value = current_region
		if = {
			limit = { is_in_array = { SOL_ongoing_strat_tele = current_region } }
			remove_from_array = { SOL_ongoing_strat_tele = current_region }
			clear_variable = sol_alert_popup_show
			set_variable = { sol_alert_title_var = 5 }
			set_variable = { sol_alert_desc_var = 12 }
			set_variable = { alert_region = current_region }
			set_variable = { var = sol_alert_popup_show value = 1 }
		}
	}
	clear_array = SOL_completed_strat_tele
	if = {
		limit = {
			EQS = { is_ai = yes }
		}
		multiply_variable = { var = SOL_dynamic_modifier_civ_use_total value = 0.7 }
		round_variable = SOL_dynamic_modifier_civ_use_total
	}
	if = {
		limit = {
			has_variable = sol_public_works_screen_show
		}
		add_to_variable = { var = sol_public_works_screen_show value = 1 }
	}
}
SOL_calculate_public_works_industry_use = {
	set_variable = { var = SOL_public_works_industry_use value = sol_public_works_cost_per_state }
	multiply_variable = { var = SOL_public_works_industry_use value = SOL_public_works_num_states^currently_selected_region }
	set_variable = { var = SOL_public_works_industry_use_multiplier value = 5 }
	subtract_from_variable = { var = SOL_public_works_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
	divide_variable = { var = SOL_public_works_industry_use_multiplier value = 10 }
	add_to_variable = { var = SOL_public_works_industry_use_multiplier value = 1 }
	multiply_variable = { var = SOL_public_works_industry_use value = SOL_public_works_industry_use_multiplier }
	round_variable = SOL_public_works_industry_use
	set_variable = { var = SOL_public_works_industry_use_after value = SOL_public_works_industry_use }
	add_to_variable = { var = SOL_public_works_industry_use_after value = SOL_dynamic_modifier_civ_use_total }

	set_variable = { var = SOL_urban_planning_industry_use value = sol_urban_planning_cost_per_state }
	multiply_variable = { var = SOL_urban_planning_industry_use value = SOL_public_works_num_states^currently_selected_region }
	set_variable = { var = SOL_urban_planning_industry_use_multiplier value = 5 }
	subtract_from_variable = { var = SOL_urban_planning_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
	divide_variable = { var = SOL_urban_planning_industry_use_multiplier value = 10 }
	add_to_variable = { var = SOL_urban_planning_industry_use_multiplier value = 1 }
	multiply_variable = { var = SOL_urban_planning_industry_use value = SOL_urban_planning_industry_use_multiplier }
	round_variable = SOL_urban_planning_industry_use
	set_variable = { var = SOL_urban_planning_industry_use_after value = SOL_urban_planning_industry_use }
	add_to_variable = { var = SOL_urban_planning_industry_use_after value = SOL_dynamic_modifier_civ_use_total }

	set_variable = { var = SOL_agmech_industry_use value = sol_agmech_cost_per_state }
	multiply_variable = { var = SOL_agmech_industry_use value = SOL_public_works_num_states^currently_selected_region }
	set_variable = { var = SOL_agmech_industry_use_multiplier value = 5 }
	subtract_from_variable = { var = SOL_agmech_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
	divide_variable = { var = SOL_agmech_industry_use_multiplier value = 20 }
	add_to_variable = { var = SOL_agmech_industry_use_multiplier value = 1 }
	multiply_variable = { var = SOL_agmech_industry_use value = SOL_agmech_industry_use_multiplier }
	round_variable = SOL_agmech_industry_use
	set_variable = { var = SOL_agmech_industry_use_after value = SOL_agmech_industry_use }
	add_to_variable = { var = SOL_agmech_industry_use_after value = SOL_dynamic_modifier_civ_use_total }

	set_variable = { var = SOL_infrastructure_hardening_num_states_this_region value = 0 }
	every_controlled_state = {
		limit = {
			AND = {
				check_variable = { SOL_public_works_region_id = EQS.currently_selected_region }
				NOT = { has_dynamic_modifier = { modifier = SOL_infrastructure_hardening_bonus } }
				is_controlled_by = EQS
			}
		}
		EQS = { add_to_variable = { var = SOL_infrastructure_hardening_num_states_this_region value = 1 } }
	}
	set_variable = { var = SOL_infrastructure_hardening_num_states^currently_selected_region value = SOL_infrastructure_hardening_num_states_this_region }
	set_variable = { var = SOL_infrastructure_hardening_industry_use value = sol_infrastructure_hardening_cost_per_state }
	multiply_variable = { var = SOL_infrastructure_hardening_industry_use value = SOL_infrastructure_hardening_num_states^currently_selected_region }
	set_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = 5 }
	subtract_from_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
	divide_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = 25 }
	add_to_variable = { var = SOL_infrastructure_hardening_industry_use_multiplier value = 1 }
	multiply_variable = { var = SOL_infrastructure_hardening_industry_use value = SOL_infrastructure_hardening_industry_use_multiplier }
	round_variable = SOL_infrastructure_hardening_industry_use
	set_variable = { var = SOL_infrastructure_hardening_industry_use_after value = SOL_infrastructure_hardening_industry_use }
	add_to_variable = { var = SOL_infrastructure_hardening_industry_use_after value = SOL_dynamic_modifier_civ_use_total }

	set_variable = { var = SOL_strat_tele_num_states_this_region value = 0 }
	every_controlled_state = {
		limit = {
			AND = {
				check_variable = { SOL_public_works_region_id = EQS.currently_selected_region }
				NOT = { has_state_flag = SOL_completed_strat_tele }
				is_controlled_by = EQS
			}
		}
		EQS = { add_to_variable = { var = SOL_strat_tele_num_states_this_region value = 1 } }
	}
	set_variable = { var = SOL_strat_tele_num_states^currently_selected_region value = SOL_strat_tele_num_states_this_region }
	set_variable = { var = SOL_strat_tele_industry_use value = sol_strat_tele_cost_per_state }
	multiply_variable = { var = SOL_strat_tele_industry_use value = SOL_strat_tele_num_states^currently_selected_region }
	set_variable = { var = SOL_strat_tele_industry_use_multiplier value = 5 }
	subtract_from_variable = { var = SOL_strat_tele_industry_use_multiplier value = SOL_public_works_region_development^currently_selected_region }
	divide_variable = { var = SOL_strat_tele_industry_use_multiplier value = 25 }
	add_to_variable = { var = SOL_strat_tele_industry_use_multiplier value = 1 }
	multiply_variable = { var = SOL_strat_tele_industry_use value = SOL_strat_tele_industry_use_multiplier }
	round_variable = SOL_strat_tele_industry_use
	set_variable = { var = SOL_strat_tele_industry_use_after value = SOL_strat_tele_industry_use }
	add_to_variable = { var = SOL_strat_tele_industry_use_after value = SOL_dynamic_modifier_civ_use_total }

	set_variable = { var = SOL_modern_national_development_industry_use value = sol_modern_national_development_cost_per_state }
	multiply_variable = { var = SOL_modern_national_development_industry_use value = SOL_greater_equestria_num_states }
	set_variable = { var = SOL_modern_national_development_industry_use_multiplier value = 5 }
	subtract_from_variable = { var = SOL_modern_national_development_industry_use_multiplier value = SOL_public_works_region_development_average }
	divide_variable = { var = SOL_modern_national_development_industry_use_multiplier value = 10 }
	add_to_variable = { var = SOL_modern_national_development_industry_use_multiplier value = 1 }
	multiply_variable = { var = SOL_modern_national_development_industry_use value = SOL_modern_national_development_industry_use_multiplier }
	round_variable = SOL_modern_national_development_industry_use
	set_variable = { var = SOL_modern_national_development_industry_use_after value = SOL_modern_national_development_industry_use }
	add_to_variable = { var = SOL_modern_national_development_industry_use_after value = SOL_dynamic_modifier_civ_use_total }
}
SOL_add_railway_to_state = {
	if = {
		limit = { check_variable = { current_region = 1 } }
		build_railway = {
			level = 1
			start_province = 179
			target_province = 9375
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 773
			target_province = 11331
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11331
			target_province = 9347
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9347
			target_province = 9470
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3737
			target_province = 3552
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3552
			target_province = 3716
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3716
			target_province = 9618
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 179
			target_province = 9357
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6975
			target_province = 3162
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11672
			target_province = 9741
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11627
			target_province = 6739
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6739
			target_province = 3716
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11627
			target_province = 3641
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 911
			target_province = 773
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 782
			target_province = 11427
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 782
			target_province = 11627
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 782
			target_province = 9867
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6789
			target_province = 782
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6789
			target_province = 10063
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11114
			target_province = 950
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3772
			target_province = 3915
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 590
			target_province = 11399
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11100
			target_province = 611
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6975
			target_province = 11114
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 907
			target_province = 9375
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9357
			target_province = 11686
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6023
			target_province = 389
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11676
			target_province = 11427
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 2 } }
		build_railway = {
			level = 1
			start_province = 950
			target_province = 758
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 7068
			target_province = 4080
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11898
			target_province = 389
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9891
			target_province = 3898
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 874
			target_province = 758
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6734
			target_province = 11710
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6734
			target_province = 9719
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 874
			target_province = 3953
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6598
			target_province = 6812
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9800
			target_province = 13119
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 874
			target_province = 11877
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 758
			target_province = 11875
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11875
			target_province = 11052
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11877
			target_province = 10359
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10510
			target_province = 9719
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3044
			target_province = 11877
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10056
			target_province = 784
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 12070
			target_province = 794
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6996
			target_province = 4024
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 4024
			target_province = 6902
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3887
			target_province = 11606
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6598
			target_province = 11606
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 3 } }
		build_railway = {
			level = 1
			start_province = 6314
			target_province = 9887
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6598
			target_province = 9887
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11898
			target_province = 389
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6598
			target_province = 3044
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11052
			target_province = 6165
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3162
			target_province = 3126
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 13275
			target_province = 124
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9887
			target_province = 6125
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 13205
			target_province = 61
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 61
			target_province = 6125
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6118
			target_province = 11135
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11135
			target_province = 9032
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9032
			target_province = 3844
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3844
			target_province = 6111
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6111
			target_province = 9069
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9069
			target_province = 9208
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 4 } }
		build_railway = {
			level = 1
			start_province = 11399
			target_province = 3645
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9375
			target_province = 69
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9375
			target_province = 11231
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9361
			target_province = 6412
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 69
			target_province = 3645
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9470
			target_province = 11399
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 442
			target_province = 11413
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11101
			target_province = 11350
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9806
			target_province = 3786
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3786
			target_province = 1870
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 1870
			target_province = 35
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 5 } }
		build_railway = {
			level = 1
			start_province = 9888
			target_province = 6577
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6577
			target_province = 10754
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 13145
			target_province = 6412
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11380
			target_province = 10754
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10754
			target_province = 7077
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 13145
			target_province = 585
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 7077
			target_province = 1141
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 585
			target_province = 3734
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9677
			target_province = 9744
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3786
			target_province = 1870
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6597
			target_province = 11216
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3247
			target_province = 9351
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6938
			target_province = 6280
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6233
			target_province = 9351
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9351
			target_province = 11696
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 748
			target_province = 585
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9663
			target_province = 3734
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 714
			target_province = 3774
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 4614
			target_province = 3653
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 748
			target_province = 6689
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3653
			target_province = 6689
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 7554
			target_province = 6354
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11216
			target_province = 10855
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10855
			target_province = 6354
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6791
			target_province = 6354
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6791
			target_province = 3774
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6577
			target_province = 3734
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11216
			target_province = 6864
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 6 } }
		build_railway = {
			level = 1
			start_province = 3645
			target_province = 11754
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11754
			target_province = 4535
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11427
			target_province = 9572
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11427
			target_province = 11037
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11511
			target_province = 199
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 199
			target_province = 11037
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11037
			target_province = 11401
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11401
			target_province = 4535
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9646
			target_province = 9606
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9606
			target_province = 11580
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11619
			target_province = 3484
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3484
			target_province = 581
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 581
			target_province = 11577
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11577
			target_province = 11612
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11612
			target_province = 9606
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11581
			target_province = 3596
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3596
			target_province = 658
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9591
			target_province = 3680
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 7 } }
		build_railway = {
			level = 1
			start_province = 9572
			target_province = 668
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9630
			target_province = 9633
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6656
			target_province = 688
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10893
			target_province = 13011
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 13011
			target_province = 11499
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11499
			target_province = 3444
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 405
			target_province = 8622
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3444
			target_province = 9486
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9486
			target_province = 8622
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 8622
			target_province = 6444
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6444
			target_province = 309
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 309
			target_province = 12857
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 12857
			target_province = 11264
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9524
			target_province = 9894
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 538
			target_province = 3561
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 963
			target_province = 6972
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6972
			target_province = 12098
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3609
			target_province = 3646
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3646
			target_province = 3641
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 658
			target_province = 3641
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3561
			target_province = 11402
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 1346
			target_province = 6583
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9557
			target_province = 3609
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11318
			target_province = 3524
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 8 } }
		build_railway = {
			level = 1
			start_province = 10666
			target_province = 3296
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 13205
			target_province = 9160
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9160
			target_province = 11065
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11065
			target_province = 11788
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 489
			target_province = 11788
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9887
			target_province = 13299
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9150
			target_province = 3305
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3507
			target_province = 11109
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3305
			target_province = 9485
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6364
			target_province = 9477
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9150
			target_province = 9359
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11342
			target_province = 304
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6791
			target_province = 304
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 304
			target_province = 9164
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9164
			target_province = 10448
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10448
			target_province = 13311
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10448
			target_province = 9459
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3653
			target_province = 11459
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11459
			target_province = 9459
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9164
			target_province = 11656
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9485
			target_province = 9437
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11489
			target_province = 319
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 319
			target_province = 9810
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9164
			target_province = 95
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 95
			target_province = 11109
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11109
			target_province = 3152
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 9 } }
		build_railway = {
			level = 1
			start_province = 3044
			target_province = 9477
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11026
			target_province = 6925
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 784
			target_province = 6925
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6925
			target_province = 1614
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 12070
			target_province = 3274
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10359
			target_province = 1614
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 1614
			target_province = 311
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 351
			target_province = 337
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 311
			target_province = 3329
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 311
			target_province = 3159
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 3584
			target_province = 488
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 458
			target_province = 3217
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 2082
			target_province = 3329
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9269
			target_province = 119
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11546
			target_province = 3082
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11161
			target_province = 3335
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9437
			target_province = 3584
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9237
			target_province = 9573
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9573
			target_province = 11546
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 6925
			target_province = 9255
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9255
			target_province = 11371
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9484
			target_province = 3369
			build_only_on_allied = yes
		}
	}
	if = {
		limit = { check_variable = { current_region = 10 } }
		build_railway = {
			level = 1
			start_province = 11137
			target_province = 11103
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 8101
			target_province = 829
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 829
			target_province = 10106
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 829
			target_province = 5005
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11071
			target_province = 7091
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 7091
			target_province = 1544
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 7091
			target_province = 10825
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10825
			target_province = 1680
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 10005
			target_province = 84
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9957
			target_province = 84
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 9957
			target_province = 12521
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 11964
			target_province = 4486
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 8085
			target_province = 5005
			build_only_on_allied = yes
		}
		build_railway = {
			level = 1
			start_province = 7977
			target_province = 12316
			build_only_on_allied = yes
		}
	}
}
SOL_upgrade_state_category = {
	custom_effect_tooltip = SOL_upgrade_state_category_tt
	hidden_effect = {
		if = {
			limit = { has_state_category = metropolis }
			set_state_category = megalopolis
		}
		else_if = {
			limit = { has_state_category = large_city }
			set_state_category = metropolis
		}
		else_if = {
			limit = { has_state_category = city }
			set_state_category = large_city
		}
		else_if = {
			limit = { has_state_category = large_town }
			set_state_category = city
		}
		else_if = {
			limit = { has_state_category = town }
			set_state_category = large_town
		}
		else_if = {
			limit = { has_state_category = rural }
			set_state_category = town
		}
		else_if = {
			limit = { has_state_category = pastoral }
			set_state_category = rural
		}
		else_if = {
			limit = { has_state_category = wasteland }
			set_state_category = pastoral
		}
	}
}
SOL_agmech_vps_to_state = {
	if = {
		limit = { check_variable = { current_region = 1 } }
		122 = { SOL_upgrade_state_category = yes }
		97 = { SOL_upgrade_state_category = yes }
		116 = { SOL_upgrade_state_category = yes }
		121 = { SOL_upgrade_state_category = yes }
		65 = { SOL_upgrade_state_category = yes }
		65 = { add_manpower = 24813 }
		101 = { SOL_upgrade_state_category = yes }
		117 = { SOL_upgrade_state_category = yes }
		111 = { SOL_upgrade_state_category = yes }
		104 = { SOL_upgrade_state_category = yes }
		114 = { SOL_upgrade_state_category = yes }
		39 = { SOL_upgrade_state_category = yes }
		63 = { SOL_upgrade_state_category = yes }
		128 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 611
			value = 1
		}
		set_province_name = {
		    id = 611
		    name = "Featherstone"
		}
		39 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 611
			}
		}
		set_victory_points = {
			province = 3772
			value = 3
		}
		set_province_name = {
		    id = 3772
		    name = "Sunlight Passage"
		}
		65 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3772
			}
		}
		65 = { add_manpower = 29481 }
		set_victory_points = {
			province = 9618
			value = 2
		}
		set_province_name = {
		    id = 9618
		    name = "Ixtapan"
		}
		84 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9618
			}
		}
		84 = { add_manpower = 11312 }
		set_victory_points = {
			province = 3368
			value = 2
		}
		set_province_name = {
		    id = 3368
		    name = "Coltford"
		}
		114 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3368
			}
		}
		set_victory_points = {
			province = 562
			value = 1
		}
		set_province_name = {
		    id = 562
		    name = "Coltson City"
		}
		117 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 562
			}
		}
		set_victory_points = {
			province = 11882
			value = 1
		}
		set_province_name = {
		    id = 11882
		    name = "Blacksoil"
		}
		63 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11882
			}
		}
		set_victory_points = {
			province = 3312
			value = 1
		}
		set_province_name = {
		    id = 3312
		    name = "Bloomsgrove"
		}
		101 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3312
			}
		}
		set_victory_points = {
			province = 3523
			value = 1
		}
		set_province_name = {
		    id = 3523
		    name = "Meadowbrook"
		}
		116 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3523
			}
		}
		add_victory_points = {
			province = 11399
			value = 2
		}
		add_victory_points = {
			province = 773
			value = 2
		}
		add_victory_points = {
			province = 6789
			value = 2
		}
		add_victory_points = {
			province = 782
			value = 5
		}
		add_victory_points = {
			province = 9876
			value = 2
		}
		add_victory_points = {
			province = 9375
			value = 3
		}
		add_victory_points = {
			province = 11100
			value = 1
		}
		add_victory_points = {
			province = 3893
			value = 1
		}
		add_victory_points = {
			province = 11593
			value = 2
		}
		add_victory_points = {
			province = 389
			value = 2
		}
	}
	if = {
		limit = { check_variable = { current_region = 2 } }
		223 = { SOL_upgrade_state_category = yes }
		184 = { SOL_upgrade_state_category = yes }
		230 = { SOL_upgrade_state_category = yes }
		232 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 3887
			value = 2
		}
		add_victory_points = {
			province = 3953
			value = 2
		}
		set_victory_points = {
			province = 962
			value = 2
		}
		set_province_name = {
		    id = 962
		    name = "Red Hills"
		}
		107 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 962
			}
		}
		add_victory_points = {
			province = 6931
			value = 3
		}
		add_victory_points = {
			province = 11052
			value = 2
		}
		add_victory_points = {
			province = 6996
			value = 2
		}
		add_victory_points = {
			province = 784
			value = 1
		}
		add_victory_points = {
			province = 12096
			value = 1
		}
		add_victory_points = {
			province = 4080
			value = 1
		}
		set_victory_points = {
			province = 12465
			value = 1
		}
		set_province_name = {
		    id = 12465
		    name = "Fairford"
		}
		525 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 12465
			}
		}
		set_victory_points = {
			province = 6902
			value = 1
		}
		set_province_name = {
		    id = 6902
		    name = "Salford"
		}
		230 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6902
			}
		}
	}
	if = {
		limit = { check_variable = { current_region = 3 } }
		102 = { SOL_upgrade_state_category = yes }
		180 = { SOL_upgrade_state_category = yes }
		178 = { SOL_upgrade_state_category = yes }
		183 = { SOL_upgrade_state_category = yes }
		40 = { 
			SOL_upgrade_state_category = yes 
			add_manpower = 14901
		}
		set_victory_points = {
			province = 13275
			value = 1
		}
		set_province_name = {
		    id = 13275
		    name = "Outreach"
		}
		40 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 13275
			}
		}
		add_victory_points = {
			province = 9208
			value = 4
		}
		add_victory_points = {
			province = 3044
			value = 1
		}
		add_victory_points = {
			province = 124
			value = 2
		}
		add_victory_points = {
			province = 3844
			value = 1
		}
		set_victory_points = {
			province = 13284
			value = 1
		}
		set_province_name = {
		    id = 13284
		    name = "Ice Hearth"
		}
		178 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 13284
			}
		}
		set_victory_points = {
			province = 9147
			value = 1
		}
		set_province_name = {
		    id = 9147
		    name = "Northwell"
		}
		135 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9147
			}
		}
		set_victory_points = {
			province = 6509
			value = 1
		}
		set_province_name = {
		    id = 6509
		    name = "Geode Plains"
		}
		180 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6509
			}
		}
	}
	if = {
		limit = { check_variable = { current_region = 4 } }
		100 = { SOL_upgrade_state_category = yes }
		94 = { SOL_upgrade_state_category = yes }
		127 = { SOL_upgrade_state_category = yes }
		119 = { SOL_upgrade_state_category = yes }
		118 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 1373
			value = 2
		}
		add_victory_points = {
			province = 11515
			value = 2
		}
		add_victory_points = {
			province = 9457
			value = 2
		}
		add_victory_points = {
			province = 3645
			value = 1
		}
		set_victory_points = {
			province = 9361
			value = 1
		}
		set_province_name = {
		    id = 9361
		    name = "White Tail"
		}
		41 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9361
			}
		}
		87 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11029
			}
		}
		set_victory_points = {
			province = 11350
			value = 2
		}
		set_province_name = {
		    id = 11350
		    name = "Sunnydale"
		}
		100 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11350
			}
		}
		set_victory_points = {
			province = 11367
			value = 1
		}
		set_province_name = {
		    id = 11367
		    name = "Blackpillar"
		}
		38 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11367
			}
		}
	}
	if = {
		limit = { check_variable = { current_region = 5 } }
		61 = { SOL_upgrade_state_category = yes }
		173 = { SOL_upgrade_state_category = yes }
		138 = { SOL_upgrade_state_category = yes }
		137 = { SOL_upgrade_state_category = yes }
		131 = { SOL_upgrade_state_category = yes }
		60 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 6597
			value = 1
		}
		set_province_name = {
		    id = 6597
		    name = "Apiary"
		}
		126 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6597
			}
		}
		set_victory_points = {
			province = 3856
			value = 1
		}
		set_province_name = {
		    id = 3856
		    name = "Chromite Hills"
		}
		61 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3856
			}
		}
		set_victory_points = {
			province = 1870
			value = 1
		}
		set_province_name = {
		    id = 1870
		    name = "Wolfcrest"
		}
		18 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 1870
			}
		}
		set_victory_points = {
			province = 6354
			value = 1
		}
		set_province_name = {
		    id = 6354
		    name = "Fleetwood"
		}
		174 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6354
			}
		}
		set_victory_points = {
			province = 9744
			value = 1
		}
		set_province_name = {
		    id = 9744
		    name = "Solar Plains" #Supply node without town
		}
		46 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6311 #Doesn't have supply node
			}
		}
		set_victory_points = {
			province = 6233
			value = 1
		}
		set_province_name = {
		    id = 6233
		    name = "Stratus Hills"
		}
		54 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6233
			}
		}
		set_victory_points = {
			province = 6763
			value = 1
		}
		set_province_name = {
		    id = 6763
		    name = "Avon"
		}
		136 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6763
			}
		}
		set_victory_points = {
			province = 3653
			value = 1
		}
		set_province_name = {
		    id = 3653
		    name = "Fort Coltgrave"
		}
		137 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3653
			}
		}
		set_victory_points = {
			province = 1009
			value = 1
		}
		set_province_name = {
		    id = 1009
		    name = "Marshthorpe"
		}
		173 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 1009
			}
		}
		add_victory_points = {
			province = 9806
			value = 2
		}
		add_victory_points = {
			province = 511
			value = 5
		}
		add_victory_points = {
			province = 457
			value = 2
		}
		add_victory_points = {
			province = 11216
			value = 4
		}
		add_victory_points = {
			province = 705
			value = 2
		}
		add_victory_points = {
			province = 10754
			value = 2
		}
	}
	if = {
		limit = { check_variable = { current_region = 6 } }
		85 = { SOL_upgrade_state_category = yes }
		23 = { SOL_upgrade_state_category = yes }
		44 = { SOL_upgrade_state_category = yes }
		91 = { SOL_upgrade_state_category = yes }
		92 = { SOL_upgrade_state_category = yes }
		51 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 9602
			value = 2
		}
		set_province_name = {
		    id = 9602
		    name = "Warmwater Bay"
		}
		49 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9602
			}
			add_building_construction = {
				type = naval_base
				level = 1
				instant_build = yes
				province = 9602
			}
		}
		set_victory_points = {
			province = 3680
			value = 2
		}
		set_province_name = {
		    id = 3680
		    name = "La Pone"
		}
		91 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3680
			}
			add_building_construction = {
				type = naval_base
				level = 1
				instant_build = yes
				province = 3680
			}
		}
		set_victory_points = {
			province = 9551
			value = 3
		}
		set_province_name = {
		    id = 9551
		    name = "Neighcaragua"
		}
		51 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9551
			}
			add_building_construction = {
				type = naval_base
				level = 1
				instant_build = yes
				province = 9551
			}
		}
		set_victory_points = {
			province = 3623
			value = 1
		}
		set_province_name = {
		    id = 3623
		    name = "Acoltuco"
		}
		92 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3623
			}
		}
		set_victory_points = {
			province = 658
			value = 1
		}
		set_province_name = {
		    id = 658
		    name = "Rocky Creek"
		}
		23 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 658
			}
		}
		93 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11580
			}
		}
		set_victory_points = {
			province = 624
			value = 3
		}
		set_province_name = {
		    id = 624
		    name = "San Anponyio"
		}
		add_victory_points = {
			province = 3663
			value = 2
		}
		add_victory_points = {
			province = 1643
			value = 2
		}
		add_victory_points = {
			province = 11037
			value = 2
		}
		add_victory_points = {
			province = 11754
			value = 2
		}
	}
	if = {
		limit = { check_variable = { current_region = 7 } }
		27 = { SOL_upgrade_state_category = yes }
		82 = { SOL_upgrade_state_category = yes }
		88 = { SOL_upgrade_state_category = yes }
		86 = { SOL_upgrade_state_category = yes }
		352 = { SOL_upgrade_state_category = yes }
		90 = { SOL_upgrade_state_category = yes }
		50 = { SOL_upgrade_state_category = yes }
		31 = { SOL_upgrade_state_category = yes }
		35 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 3641
			value = 1
		}
		set_province_name = {
		    id = 3641
		    name = "Stonecrest"
		}
		35 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3641
			}
		}
		set_victory_points = {
			province = 6583
			value = 2
		}
		set_province_name = {
		    id = 6583
		    name = "Fort Greengrass"
		}
		82 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6583
			}
		}
		set_victory_points = {
			province = 12098
			value = 1
		}
		set_province_name = {
		    id = 12098
		    name = "Hayseed"
		}
		27 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 12098
			}
		}
		set_victory_points = {
			province = 3609
			value = 1
		}
		set_province_name = {
		    id = 3609
		    name = "La Venta"
		}
		81 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3609
			}
		}
		set_victory_points = {
			province = 11402
			value = 3
		}
		set_province_name = {
		    id = 11402
		    name = "Cholula"
		}
		26 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11402
			}
		}
		set_victory_points = {
			province = 9894
			value = 1
		}
		set_province_name = {
		    id = 9894
		    name = "Itzcoltl"
		}
		86 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9894
			}
		}
		set_victory_points = {
			province = 3524
			value = 3
		}
		set_province_name = {
		    id = 3524
		    name = "Tlacopan"
		}
		88 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3524
			}
		}
		set_victory_points = {
			province = 9482
			value = 3
		}
		set_province_name = {
		    id = 9482
		    name = "Tetzcoco"
		}
		31 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9482
			}
			add_building_construction = {
				type = naval_base
				level = 1
				instant_build = yes
				province = 9482
			}
		}
		add_victory_points = {
			province = 9572
			value = 2
		}
		add_victory_points = {
			province = 688
			value = 1
		}
		add_victory_points = {
			province = 11264
			value = 2
		}
		add_victory_points = {
			province = 3444
			value = 2
		}
		add_victory_points = {
			province = 405
			value = 5
		}
		add_victory_points = {
			province = 11499
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 8 } }
		236 = { SOL_upgrade_state_category = yes }
		77 = { SOL_upgrade_state_category = yes }
		64 = { SOL_upgrade_state_category = yes }
		139 = { SOL_upgrade_state_category = yes }
		150 = { SOL_upgrade_state_category = yes }
		149 = { SOL_upgrade_state_category = yes }
		144 = { SOL_upgrade_state_category = yes }
		151 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 3296
			value = 1
		}
		set_province_name = {
		    id = 3296
		    name = "Quartz Plateau"
		}
		150 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3296
			}
		}
		set_victory_points = {
			province = 3152
			value = 1
		}
		set_province_name = {
		    id = 3152
		    name = "Hoofary"
		}
		141 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3152
			}
		}
		set_victory_points = {
			province = 3507
			value = 5
		}
		set_province_name = {
		    id = 3507
		    name = "Nitrate Hills"
		}
		144 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3507
			}
		}
		set_victory_points = {
			province = 6480
			value = 3
		}
		set_province_name = {
		    id = 6480
		    name = "Buckstol"
		}
		149 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 6480
			}
		}
		set_victory_points = {
			province = 149
			value = 1
		}
		set_province_name = {
		    id = 149
		    name = "Sapphire Creek"
		}
		147 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 149
			}
		}
		set_victory_points = {
			province = 509
			value = 1
		}
		set_province_name = {
		    id = 509
		    name = "Horsesham"
		}
		343 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 509
			}
		}
		set_victory_points = {
			province = 13311
			value = 1
		}
		set_province_name = {
		    id = 13311
		    name = "Fort Hocks"
		}
		318 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 13311
			}
		}
		add_victory_points = {
			province = 10448
			value = 2
		}
		add_victory_points = {
			province = 9275
			value = 1
		}
		add_victory_points = {
			province = 9164
			value = 2
		}
		add_victory_points = {
			province = 3511
			value = 1
		}
		add_victory_points = {
			province = 3305
			value = 2
		}
	}
	if = {
		limit = { check_variable = { current_region = 9 } }
		241 = { set_state_category = rural }
		154 = { SOL_upgrade_state_category = yes }
		156 = { SOL_upgrade_state_category = yes }
		158 = { SOL_upgrade_state_category = yes }
		653 = { SOL_upgrade_state_category = yes }
		165 = { SOL_upgrade_state_category = yes }
		161 = { SOL_upgrade_state_category = yes }
		334 = { SOL_upgrade_state_category = yes }
		234 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 11026
			value = 1
		}
		set_province_name = {
		    id = 11026
		    name = "Fillyzino"
		}
		154 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11026
			}
		}
		set_victory_points = {
			province = 11257
			value = 1
		}
		set_province_name = {
		    id = 11257
		    name = "Lobnya"
		}
		158 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 11257
			}
		}
		set_victory_points = {
			province = 8074
			value = 1
		}
		set_province_name = {
		    id = 8074
		    name = "Ponysovka"
		}
		653 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 8074
			}
		}
		set_victory_points = {
			province = 3359
			value = 1
		}
		set_province_name = {
		    id = 3359
		    name = "Nytva"
		}
		161 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 3359
			}
		}
		set_victory_points = {
			province = 9573
			value = 1
		}
		set_province_name = {
		    id = 9573
		    name = "Ponsk"
		}
		161 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9573
			}
		}
		225 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 9405
			}
		}
		add_victory_points = {
			province = 3329
			value = 2
		}
		add_victory_points = {
			province = 6350
			value = 2
		}
		add_victory_points = {
			province = 869
			value = 1
		}
		add_victory_points = {
			province = 6925
			value = 1
		}
		add_victory_points = {
			province = 3983
			value = 2
		}
		add_victory_points = {
			province = 11546
			value = 1
		}
		add_victory_points = {
			province = 6208
			value = 1
		}
		add_victory_points = {
			province = 11161
			value = 2
		}
	}
	if = {
		limit = { check_variable = { current_region = 10 } }
		357 = { SOL_upgrade_state_category = yes }
		354 = { SOL_upgrade_state_category = yes }
		358 = { SOL_upgrade_state_category = yes }
		set_victory_points = {
			province = 10876
			value = 1
		}
		set_province_name = {
		    id = 10876
		    name = "Newcoltle"
		}
		354 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 10876
			}
		}
		set_victory_points = {
			province = 4486
			value = 2
		}
		set_province_name = {
		    id = 4486
		    name = "Foalmantle"
		}
		355 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 4486
			}
		}
		set_victory_points = {
			province = 12316
			value = 1
		}
		set_province_name = {
		    id = 12316
		    name = "Rockhoofton"
		}
		363 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 12316
			}
		}
		365 = {
			add_building_construction = {
				type = supply_node
				level = 1
				instant_build = yes
				province = 5005
			}
		}
		add_victory_points = {
			province = 1680
			value = 1
		}
		add_victory_points = {
			province = 9957
			value = 1
		}
		add_victory_points = {
			province = 11071
			value = 2
		}
		add_victory_points = {
			province = 10825
			value = 2
		}
		add_victory_points = {
			province = 5005
			value = 1
		}
		add_victory_points = {
			province = 10106
			value = 2
		}
		add_victory_points = {
			province = 8101
			value = 2
		}
	}
}
SOL_urban_planning_vps_to_state = {
	if = {
		limit = { check_variable = { current_region = 1 } }
		2 = { SOL_upgrade_state_category = yes }
		3 = { SOL_upgrade_state_category = yes }
		68 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 179
			value = 5
		}
		add_victory_points = {
			province = 11672
			value = 10
		}
		add_victory_points = {
			province = 9741
			value = 5
		}
		add_victory_points = {
			province = 6023
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 2 } }
		12 = { SOL_upgrade_state_category = yes }
		525 = { SOL_upgrade_state_category = yes }
		231 = { SOL_upgrade_state_category = yes }
		187 = { SOL_upgrade_state_category = yes }
		110 = { SOL_upgrade_state_category = yes }
		29 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 3887
			value = 3
		}
		add_victory_points = {
			province = 11684
			value = 2
		}
		add_victory_points = {
			province = 6734
			value = 3
		}
		add_victory_points = {
			province = 11710
			value = 2
		}
		add_victory_points = {
			province = 3920
			value = 5
		}
		add_victory_points = {
			province = 874
			value = 5
		}
		add_victory_points = {
			province = 187
			value = 5
		}
		add_victory_points = {
			province = 11877
			value = 2
		}
		add_victory_points = {
			province = 10359
			value = 5
		}
		add_victory_points = {
			province = 3915
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 3 } }
		74 = { SOL_upgrade_state_category = yes }
		70 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 3162
			value = 10
		}
		add_victory_points = {
			province = 9887
			value = 10
		}
	}
	if = {
		limit = { check_variable = { current_region = 4 } }
		38 = { SOL_upgrade_state_category = yes }
		66 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 11511
			value = 10
		}
	}
	if = {
		limit = { check_variable = { current_region = 5 } }
		136 = { SOL_upgrade_state_category = yes }
		170 = { SOL_upgrade_state_category = yes }
		132 = { SOL_upgrade_state_category = yes }
		46 = { SOL_upgrade_state_category = yes }
		14 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 748
			value = 5
		}
		add_victory_points = {
			province = 2064
			value = 5
		}
		add_victory_points = {
			province = 13145
			value = 5
		}
		add_victory_points = {
			province = 11686
			value = 5
		}
		add_victory_points = {
			province = 9806
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 6 } }
		49 = { SOL_upgrade_state_category = yes }
		47 = { SOL_upgrade_state_category = yes }
		19 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 11581
			value = 5
		}
		add_victory_points = {
			province = 11427
			value = 5
		}
		add_victory_points = {
			province = 3937
			value = 2
		}
		add_victory_points = {
			province = 11754
			value = 5
		}
		add_victory_points = {
			province = 1643
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 7 } }
		16 = { SOL_upgrade_state_category = yes }
		28 = { SOL_upgrade_state_category = yes }
		15 = { SOL_upgrade_state_category = yes }
		13 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 586
			value = 5
		}
		add_victory_points = {
			province = 8622
			value = 5
		}
		add_victory_points = {
			province = 13011
			value = 5
		}
		add_victory_points = {
			province = 668
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 8 } }
		324 = { 
			SOL_upgrade_state_category = yes
			SOL_upgrade_state_category = yes 
			add_manpower = 500000
		}
		143 = {
			SOL_upgrade_state_category = yes 
			add_manpower = 250000
		}
		146 = { 
			SOL_upgrade_state_category = yes 
			SOL_upgrade_state_category = yes 
			add_manpower = 500000
		}
		144 = {
			SOL_upgrade_state_category = yes 
			add_manpower = 250000
		}
		98 = {
			add_manpower = 100000
		}
		53 = { SOL_upgrade_state_category = yes }
		331 = { SOL_upgrade_state_category = yes }
		344 = { add_manpower = -1000000 }
		345 = { add_manpower = -1000000 }
		set_temp_variable = { SOL_total_CRY_population_temp = 0 }
		every_state = {
			limit = {
				check_variable = { SOL_public_works_region_id = EQS.current_region }
				NOT = {
					OR = {
						state = 324
						state = 143
						state = 146
						state = 144
						state = 98
						state = 344
						state = 345
					}
				}
			}
			EQS = { add_to_temp_variable = { SOL_total_CRY_population_temp = PREV.state_population_k } }
		}
		set_temp_variable = { SOL_CRY_pop_multiplier = 600000 }
		divide_temp_variable = { SOL_CRY_pop_multiplier = SOL_total_CRY_population_temp }
		every_state = {
			limit = {
				check_variable = { SOL_public_works_region_id = EQS.current_region }
				NOT = {
					OR = {
						state = 324
						state = 143
						state = 146
						state = 144
						state = 98
						state = 344
						state = 345
					}
				}
			}
			set_temp_variable = { SOL_population_to_add = state_population_k }
			multiply_temp_variable = { SOL_population_to_add = EQS.SOL_CRY_pop_multiplier }
			round_temp_variable = SOL_population_to_add
			add_manpower = SOL_population_to_add
		}
		add_victory_points = {
			province = 304
			value = 5
		}
		add_victory_points = {
			province = 9150
			value = 5
		}
		add_victory_points = {
			province = 9485
			value = 5
		}
		add_victory_points = {
			province = 9236
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 9 } }
		233 = { SOL_upgrade_state_category = yes }
		67 = { SOL_upgrade_state_category = yes }
		225 = { SOL_upgrade_state_category = yes }
		235 = { SOL_upgrade_state_category = yes }
		153 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 3217
			value = 5
		}
		add_victory_points = {
			province = 119
			value = 5
		}
		add_victory_points = {
			province = 9484
			value = 5
		}
		add_victory_points = {
			province = 200
			value = 5
		}
		add_victory_points = {
			province = 3584
			value = 5
		}
	}
	if = {
		limit = { check_variable = { current_region = 10 } }
		359 = { SOL_upgrade_state_category = yes }
		356 = { SOL_upgrade_state_category = yes }
		add_victory_points = {
			province = 7091
			value = 5
		}
		add_victory_points = {
			province = 4143
			value = 5
		}
	}
}
SOL_neighua_success = {
	build_railway = {
		level = 1
		start_province = 11402
		target_province = 13247
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 13247
		target_province = 4084
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4084
		target_province = 11264
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9618
		target_province = 11360
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11360
		target_province = 4476
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4476
		target_province = 11516
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11516
		target_province = 7203
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 7203
		target_province = 10107
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 7203
		value = 1
	}
	set_province_name = {
	    id = 7203
	    name = "Xochimilco"
	}
	350 = { SOL_upgrade_state_category = yes }
	350 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 7203
		}
	}
	16 = { 
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 250 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_extra_state_shared_building_slots = 1
	}
	add_victory_points = {
		province = 8622
		value = 10
	}
	build_railway = {
		level = 1
		start_province = 8622
		target_province = 6444
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 6444
		target_province = 309
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 309
		target_province = 12857
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 12857
		target_province = 11264
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 3444
		target_province = 9486
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9486
		target_province = 8622
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11499
		target_province = 3444
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11318
		target_province = 3524
		build_only_on_allied = yes
	}
}
SOL_collaboration_success = {
	353 = { SOL_upgrade_state_category = yes }
	build_railway = {
		level = 1
		start_province = 11402
		target_province = 4084
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4084
		target_province = 11264
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 4084
		value = 3
	}
	set_province_name = {
	    id = 4084
	    name = "Carocolt"
	}
	25 = { SOL_upgrade_state_category = yes }
	25 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 4084
		}
	}
	build_railway = {
		level = 1
		start_province = 9618
		target_province = 7590
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 7590
		target_province = 521
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 521
		target_province = 569
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 569
		target_province = 7203
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 7203
		target_province = 10107
		build_only_on_allied = yes
	}
	30 = { 
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 250 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_extra_state_shared_building_slots = 1
	}
	add_victory_points = {
		province = 569
		value = 5
	}
	set_victory_points = {
		province = 7203
		value = 1
	}
	set_province_name = {
	    id = 7203
	    name = "Xochimilco"
	}
	350 = { SOL_upgrade_state_category = yes }
	350 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 7203
		}
	}
	16 = { 
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_extra_state_shared_building_slots = 1
	}
	add_victory_points = {
		province = 8622
		value = 5
	}
	build_railway = {
		level = 1
		start_province = 8622
		target_province = 6444
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 6444
		target_province = 309
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 309
		target_province = 12857
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 12857
		target_province = 11264
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 3444
		target_province = 9486
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9486
		target_province = 8622
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11499
		target_province = 3444
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11318
		target_province = 3524
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 569
		target_province = 7040
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9894
		target_province = 9922
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9922
		target_province = 7040
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 9922
		value = 1
	}
	set_province_name = {
	    id = 9922
	    name = "Tikal"
	}
	32 = { SOL_upgrade_state_category = yes }
	32 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 9922
		}
	}
	build_railway = {
		level = 1
		start_province = 7040
		target_province = 10023
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 10023
		target_province = 557
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 557
		value = 1
	}
	set_province_name = {
	    id = 557
	    name = "Sayil"
	}
	36 = { SOL_upgrade_state_category = yes }
	36 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 557
		}
	}
	build_railway = {
		level = 1
		start_province = 557
		target_province = 7908
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 7908
		target_province = 4084
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4084
		target_province = 11987
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11987
		target_province = 10875
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 10875
		value = 3
	}
	set_province_name = {
	    id = 10875
	    name = "Tulum"
	}
	79 = { SOL_upgrade_state_category = yes }
	79 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 10875
		}
		add_building_construction = {
			type = naval_base
			level = 1
			instant_build = yes
			province = 10875
		}
	}
}
SOL_thestral_success = {
	353 = { SOL_upgrade_state_category = yes }
	set_victory_points = {
		province = 4084
		value = 3
	}
	set_province_name = {
	    id = 4084
	    name = "Carocolt"
	}
	25 = { SOL_upgrade_state_category = yes }
	25 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 4084
		}
	}
	30 = { 
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 250 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_extra_state_shared_building_slots = 1
	}
	add_victory_points = {
		province = 569
		value = 5
	}
	build_railway = {
		level = 1
		start_province = 569
		target_province = 7040
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9922
		target_province = 7040
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 9922
		value = 1
	}
	set_province_name = {
	    id = 9922
	    name = "Tikal"
	}
	32 = { SOL_upgrade_state_category = yes }
	32 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 9922
		}
	}
	build_railway = {
		level = 1
		start_province = 7040
		target_province = 10023
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 10023
		target_province = 557
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 557
		value = 1
	}
	set_province_name = {
	    id = 557
	    name = "Sayil"
	}
	36 = { SOL_upgrade_state_category = yes }
	36 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 557
		}
	}
	build_railway = {
		level = 1
		start_province = 557
		target_province = 7908
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 7908
		target_province = 4084
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4084
		target_province = 11987
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11987
		target_province = 10875
		build_only_on_allied = yes
	}
	set_victory_points = {
		province = 10875
		value = 3
	}
	set_province_name = {
	    id = 10875
	    name = "Tulum"
	}
	79 = { SOL_upgrade_state_category = yes }
	79 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 10875
		}
		add_building_construction = {
			type = naval_base
			level = 1
			instant_build = yes
			province = 10875
		}
	}
}
SOL_ultimate_public_works = {
	#Metropolis
	3 = { SOL_upgrade_state_category = yes }
	12 = { SOL_upgrade_state_category = yes }
	362 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 829
		value = 5
	}
	#Dense Urban
	70 = { 
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	#Urban
	324 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 9236
		value = 5
	}
	build_railway = {
		level = 1
		start_province = 3219
		target_province = 9097
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9097
		target_province = 79
		build_only_on_allied = yes
	}
	146 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 79
		}
	}
	set_victory_points = {
		province = 79
		value = 1
	}
	set_province_name = {
	    id = 79
	    name = "Crystal Creek"
	}
	136 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 748
		value = 5
	}
	59 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 13145
		value = 5
	}
	add_victory_points = {
		province = 2064
		value = 5
	}
	47 = { 
		SOL_upgrade_state_category = yes 
		SOL_upgrade_state_category = yes 
	}
	add_victory_points = {
		province = 11754
		value = 10
	}
	19 = { SOL_upgrade_state_category = yes }
	14 = { SOL_upgrade_state_category = yes }
	324 = { SOL_upgrade_state_category = yes }
	146 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 9150
		value = 5
	}

	225 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 200
		value = 5
	}
	#Sparse Urban
	22 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11427
		value = 5
	}
	170 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11686
		value = 5
	}
	106 = {
		SOL_upgrade_state_category = yes
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 3915
		value = 5
	}
	231 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 3920
		value = 5
	}
	2 = { SOL_upgrade_state_category = yes }
	29 = { SOL_upgrade_state_category = yes }
	144 = { SOL_upgrade_state_category = yes }
	67 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 9484
		value = 5
	}
	#Developed Rural
	51 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 9551
		value = 2
	}
	21 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 11037
		value = 2
	}
	45 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	109 = { SOL_upgrade_state_category = yes }
	184 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 6996
		value = 5
	}
	100 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	332 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	165 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11161
		value = 5
	}
	131 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 300 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11216
		value = 5
	}
	103 = { SOL_upgrade_state_category = yes }
	60 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	354 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11071
		value = 2
	}
	223 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 300 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11052
		value = 5
	}
	#Rural
	104 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 11100
		value = 2
	}
	363 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 10106
		value = 2
	}
	678 = { SOL_upgrade_state_category = yes }
	add_victory_points = {
		province = 3069
		value = 2
	}
	142 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 11392
		}
	}
	add_victory_points = {
		province = 11109
		value = 2
	}
	set_victory_points = {
		province = 11392
		value = 1
	}
	set_province_name = {
	    id = 11392
	    name = "Blackcave"
	}
	129 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 3893
		value = 2
	}
	95 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	185 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	168 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 9332
		value = 2
	}
	152 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	360 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	88 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 3524
		value = 2
	}
	101 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 3312
		value = 2
	}
	99 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 9570
		}
	}
	set_victory_points = {
		province = 9570
		value = 1
	}
	set_province_name = {
	    id = 9570
	    name = "Shivering Forest"
	}
	build_railway = {
		level = 1
		start_province = 11359
		target_province = 6571
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 6571
		target_province = 9570
		build_only_on_allied = yes
	}
	65 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 3000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 3772
		value = 2
	}
	179 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 389
		value = 2
	}
	227 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 100 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	167 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	169 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	172 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	147 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 149
		value = 2
	}
	117 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 562
		value = 2
	}
	34 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	107 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 962
		value = 1
	}
	188 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 200 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	108 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 4080
		value = 2
	}
	#Pastoral
	5 = {
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 3534
		}
	}
	120 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 3674
		}
	}
	set_victory_points = {
		province = 3674
		value = 1
	}
	set_province_name = {
	    id = 3674
	    name = "Evenplains"
	}
	43 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 6586
		}
	}
	set_victory_points = {
		province = 6586
		value = 1
	}
	set_province_name = {
	    id = 6586
	    name = "Evenplains"
	}
	87 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 2000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	build_railway = {
		level = 1
		start_province = 595
		target_province = 929
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 929
		target_province = 11723
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11723
		target_province = 3509
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 3509
		target_province = 3534
		build_only_on_allied = yes
	}
	174 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	add_victory_points = {
		province = 6354
		value = 1
	}
	135 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 800 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	141 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 500 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	237 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 600 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 6532
		}
	}
	set_victory_points = {
		province = 6532
		value = 1
	}
	set_province_name = {
	    id = 6532
	    name = "Mistfall"
	}
	build_railway = {
		level = 1
		start_province = 9477
		target_province = 6532
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 409
		target_province = 6532
		build_only_on_allied = yes
	}
	164 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 500 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	145 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 500 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	84 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 500 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	115 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
		add_building_construction = {
			type = supply_node
			level = 1
			instant_build = yes
			province = 3552
		}
	}
	set_victory_points = {
		province = 3552
		value = 1
	}
	set_province_name = {
	    id = 3552
	    name = "Rocky Grove"
	}
	125 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 500 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	18 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	73 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	182 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 600 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	#Wasteland
	37 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 500 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	1 = {
		SOL_upgrade_state_category = yes
		add_manpower = 3213
	}
	155 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	134 = {
		SOL_upgrade_state_category = yes
		set_temp_variable = { SOL_population_to_add = state_population_k }
		multiply_temp_variable = { SOL_population_to_add = 1000 }
		round_temp_variable = SOL_population_to_add
		add_manpower = SOL_population_to_add
	}
	130 = {
		SOL_upgrade_state_category = yes
		add_manpower = 4113
	}
	124 = {
		SOL_upgrade_state_category = yes
		add_manpower = 4113
	}
	
	build_railway = {
		level = 1
		start_province = 962
		target_province = 6959
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 6959
		target_province = 11806
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11806
		target_province = 4098
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4098
		target_province = 4095
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 4095
		target_province = 3953
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 13119 3113 11067 3100 6200 }
		start_province = 11052
		target_province = 6200
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 6200 145 9397 11270 9285 351 }
		start_province = 6200
		target_province = 351
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 9477 10244 574 11683 9573 }
		start_province = 9477
		target_province = 9573
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 3106 11390 9054 12001 9680 9209 }
		start_province = 3106
		target_province = 9209
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 11796 3927 9929 981 3951 }
		start_province = 11796
		target_province = 3951
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 9744 8061 6481 9542 6373 }
		start_province = 9744
		target_province = 6373
	}
	build_railway = {
		level = 1
		build_only_on_allied = yes
		path = { 541 12066 10027 3901 12098 }
		start_province = 541
		target_province = 12098
	}
	build_railway = {
		level = 1
		start_province = 6118
		target_province = 11135
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 11135
		target_province = 9032
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9032
		target_province = 3844
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 3844
		target_province = 6111
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 6111
		target_province = 9069
		build_only_on_allied = yes
	}
	build_railway = {
		level = 1
		start_province = 9069
		target_province = 9208
		build_only_on_allied = yes
	}
}
SOL_attack_reroll = {
	random_list = {
		20 = {
			random_owned_controlled_state = {
				limit = {
					check_variable = { SOL_public_works_region_id < 11 }
					SOL_eligible_for_state_events = yes
					NOT = { state = event_target:SOL_resistance_stronghold }
					distance_to = {
						value < 200
						target = event_target:SOL_resistance_stronghold
					}
				}
				save_global_event_target_as = SOL_resistance_attack_target_true
			}
		}
		60 = {
			random_owned_controlled_state = {
				limit = {
					check_variable = { SOL_public_works_region_id < 11 }
					SOL_eligible_for_state_events = yes
					NOT = { state = event_target:SOL_resistance_stronghold }
					distance_to = {
						value > 200
						target = event_target:SOL_resistance_stronghold
					}
					distance_to = {
						value < 800
						target = event_target:SOL_resistance_stronghold
					}
				}
				save_global_event_target_as = SOL_resistance_attack_target_true
			}
		}
		20 = {
			random_owned_controlled_state = {
				limit = {
					check_variable = { SOL_public_works_region_id < 11 }
					SOL_eligible_for_state_events = yes
					NOT = { state = event_target:SOL_resistance_stronghold }
					distance_to = {
						value > 800
						target = event_target:SOL_resistance_stronghold
					}
				}
				save_global_event_target_as = SOL_resistance_attack_target_true
			}
		}
	}
	event_target:SOL_resistance_attack_target_true = { set_state_flag = resistance_attack_true_target }
	random_list = { 
		1 = {
			set_variable = { var = SOL_resistance_attack_type value = 1 }
			modifier = {
				factor = 3
				event_target:SOL_resistance_attack_target_true = { 
					OR = {
						arms_factory > 3 
						industrial_complex > 3 
					}
				}
			}
		}
		1 = {
			set_variable = { var = SOL_resistance_attack_type value = 2 }
			modifier = {
				factor = 3
				event_target:SOL_resistance_attack_target_true = { 
					OR = {
						has_resources_amount = {
							resource = oil
							amount > 10
						}
						has_resources_amount = {
							resource = aluminium
							amount > 10
						}
						has_resources_amount = {
							resource = steel
							amount > 10
						}
						has_resources_amount = {
							resource = chromium
							amount > 10
						}
						has_resources_amount = {
							resource = tungsten
							amount > 10
						}
						has_resources_amount = {
							resource = rubber
							amount > 10
						}
						has_resources_amount = {
							resource = crystals
							amount > 10
						}
					}
				}
			}
		}
		1 = {
			set_variable = { var = SOL_resistance_attack_type value = 3 }
			modifier = {
				factor = 3
				event_target:SOL_resistance_attack_target_true = {
					non_damaged_building_level = {
						building = infrastructure
						level > 1		
					}
				}
			}
		}
		1 = {
			set_variable = { var = SOL_resistance_attack_type value = 4 }
			modifier = {
				factor = 3
				divisions_in_state = {
					size > 4
					state = event_target:SOL_resistance_attack_target_true
				}
			}
		}
		1 = {
			set_variable = { var = SOL_resistance_attack_type value = 5 }
			modifier = {
				factor = 3
				event_target:SOL_resistance_attack_target_true = {
					state_strategic_value > 40
				}
			}
		}
		1 = {
			set_variable = { var = SOL_resistance_attack_type value = 6 }
			modifier = {
				factor = 3
				has_war = yes
			}
		}
	}
	random_owned_controlled_state = {
		limit = {
			check_variable = { SOL_public_works_region_id < 11 }
			SOL_eligible_for_state_events = yes
			NOT = { state = event_target:SOL_resistance_stronghold }
			NOT = { has_state_flag = resistance_attack_dummy_target }
			NOT = { has_state_flag = resistance_attack_true_target }
		}
		set_state_flag = resistance_attack_dummy_target
		save_global_event_target_as = SOL_resistance_attack_target_1
	}
	random_owned_controlled_state = {
		limit = {
			check_variable = { SOL_public_works_region_id < 11 }
			SOL_eligible_for_state_events = yes
			NOT = { state = event_target:SOL_resistance_stronghold }
			NOT = { has_state_flag = resistance_attack_dummy_target }
			NOT = { has_state_flag = resistance_attack_true_target }
		}
		set_state_flag = resistance_attack_dummy_target
		save_global_event_target_as = SOL_resistance_attack_target_2
	}
	random_owned_controlled_state = {
		limit = {
			check_variable = { SOL_public_works_region_id < 11 }
			SOL_eligible_for_state_events = yes
			NOT = { state = event_target:SOL_resistance_stronghold }
			NOT = { has_state_flag = resistance_attack_dummy_target }
			NOT = { has_state_flag = resistance_attack_true_target }
		}
		set_state_flag = resistance_attack_dummy_target
		save_global_event_target_as = SOL_resistance_attack_target_3
	}
	random_owned_controlled_state = {
		limit = {
			check_variable = { SOL_public_works_region_id < 11 }
			SOL_eligible_for_state_events = yes
			NOT = { state = event_target:SOL_resistance_stronghold }
			NOT = { has_state_flag = resistance_attack_dummy_target }
			NOT = { has_state_flag = resistance_attack_true_target }
		}
		set_state_flag = resistance_attack_dummy_target
		save_global_event_target_as = SOL_resistance_attack_target_4
	}
	if = {
		limit = { NOT = { has_country_flag = SOL_twilight_ascended } }
		random_owned_controlled_state = {
			limit = {
				check_variable = { SOL_public_works_region_id < 11 }
				SOL_eligible_for_state_events = yes
				NOT = { state = event_target:SOL_resistance_stronghold }
				NOT = { has_state_flag = resistance_attack_dummy_target }
				NOT = { has_state_flag = resistance_attack_true_target }
			}
			set_state_flag = resistance_attack_dummy_target
			save_global_event_target_as = SOL_resistance_attack_target_5
		}
	}
	if = {
		limit = { NOT = { has_country_flag = upgraded_inquisition } }
		random_owned_controlled_state = {
			limit = {
				check_variable = { SOL_public_works_region_id < 11 }
				SOL_eligible_for_state_events = yes
				NOT = { state = event_target:SOL_resistance_stronghold }
				NOT = { has_state_flag = resistance_attack_dummy_target }
				NOT = { has_state_flag = resistance_attack_true_target }
			}
			set_state_flag = resistance_attack_dummy_target
			save_global_event_target_as = SOL_resistance_attack_target_6
		}
	}
	random_list = {
		1 = {
			event_target:SOL_resistance_attack_target_1 = { clr_state_flag = resistance_attack_dummy_target }
			event_target:SOL_resistance_attack_target_true = { save_global_event_target_as = SOL_resistance_attack_target_1 }
		}
		1 = {
			event_target:SOL_resistance_attack_target_2 = { clr_state_flag = resistance_attack_dummy_target }
			event_target:SOL_resistance_attack_target_true = { save_global_event_target_as = SOL_resistance_attack_target_2 }
		}
		1 = {
			event_target:SOL_resistance_attack_target_3 = { clr_state_flag = resistance_attack_dummy_target }
			event_target:SOL_resistance_attack_target_true = { save_global_event_target_as = SOL_resistance_attack_target_3 }
		}
		1 = {
			event_target:SOL_resistance_attack_target_4 = { clr_state_flag = resistance_attack_dummy_target }
			event_target:SOL_resistance_attack_target_true = { save_global_event_target_as = SOL_resistance_attack_target_4 }
		}
		1 = {
			modifier = {
				factor = 0
				has_country_flag = SOL_twilight_ascended
			}
			event_target:SOL_resistance_attack_target_5 = { clr_state_flag = resistance_attack_dummy_target }
			event_target:SOL_resistance_attack_target_true = { save_global_event_target_as = SOL_resistance_attack_target_5 }
		}
		1 = {
			modifier = {
				factor = 0
				has_country_flag = upgraded_inquisition
			}
			event_target:SOL_resistance_attack_target_6 = { clr_state_flag = resistance_attack_dummy_target }
			event_target:SOL_resistance_attack_target_true = { save_global_event_target_as = SOL_resistance_attack_target_6 }
		}
	}
	
	set_variable = { var = resistance_attack_mission_dur value = 6 }
	subtract_from_variable = { var = resistance_attack_mission_dur value = solar_resistance_strength }
	multiply_variable = { var = resistance_attack_mission_dur value = 30 }
	if = {
		limit = { has_completed_focus = SOL_police_state }
		add_to_variable = { var = resistance_attack_mission_dur value = 20 }
	}
	clr_country_flag = first_refine_completed
	set_country_flag = SOL_has_ongoing_attack
	activate_mission = SOL_resistance_attack
}
SOL_calculate_division_requirements = {
	set_variable = { var = sol_uprising_division_requirements value = 4 }
	if = {
		limit = { 
			check_variable = { 
				var = daybreaker_support 
				value = 40
				compare = greater_than_or_equals
			}
			has_completed_focus = SOL_civilian_militias
		}
		set_country_flag = volunteer_militias
		subtract_from_variable = { var = sol_uprising_division_requirements value = 1 }
	}
	else = {
		clr_country_flag = volunteer_militias
	}
	if = {
		limit = { 
			has_completed_focus = SOL_decentralised_inquisitorial_policing
		}
		subtract_from_variable = { var = sol_uprising_division_requirements value = 1 }
	}
	if = {
		limit = { is_ai = yes }
		divide_variable = { var = sol_uprising_division_requirements value = 2 }
		round_variable = sol_uprising_division_requirements
	}
	clamp_variable = {
		var = sol_uprising_division_requirements
		min = 1
	}
	set_variable = { var = sol_attack_division_requirements value = sol_uprising_division_requirements }
}
SOL_calculate_border_porosity = {
	set_variable = { var = sol_border_porosity_factor value = 0 }
	add_to_variable = { 
		var = sol_border_porosity_factor
		value = sol_border_porosity_factor_military_consolidation
	}
	add_to_variable = { 
		var = sol_border_porosity_factor
		value = sol_border_porosity_factor_custom_effects
	}
	if = {
		limit = {
			OR = {
				has_country_flag = sol_porosity_increase
				has_country_flag = sol_raid_loss 
			}
		}
		add_to_variable = { var = sol_border_porosity_factor value = 0.004 }
	}
	set_variable = { var = sol_border_porosity_land value = 1 }
	subtract_from_variable = { var = sol_border_porosity_land value = sol_border_porosity_factor }
	set_variable = { var = sol_border_porosity_coastal value = 2 }
	subtract_from_variable = { var = sol_border_porosity_coastal value = sol_border_porosity_factor }
	divide_variable = { var = sol_border_porosity_coastal value = 2 }
	set_variable = { var = sol_land_border_length value = 0 }
	every_state = {
		limit = { 
			is_owned_and_controlled_by = EQS
			any_neighbor_state = { owner = { is_coalition_member = yes } }
			is_in_home_area = yes
		}
		EQS = { add_to_variable = { var = sol_land_border_length value = 1 } }
	}
	set_variable = { var = sol_coastal_border_length value = 0 }
	every_state = {
		limit = { 
			is_owned_and_controlled_by = EQS
			is_coastal = yes
			is_in_home_area = yes		
		}
		EQS = { add_to_variable = { var = sol_coastal_border_length value = 1 } }
	}
	if = {
		limit = { check_variable = { sol_land_border_length > 0 } }
		set_variable = { var = sol_porosity_calc_temp value = 1 }
		set_variable = { var = sol_border_porosity_land_per_state value = sol_border_porosity_land }
		while_loop_effect = {
			limit = { check_variable = { sol_porosity_calc_temp < sol_land_border_length } }
			multiply_variable = { var = sol_border_porosity_land value = sol_border_porosity_land_per_state }
			add_to_variable = { var = sol_porosity_calc_temp value = 1 }
		}
	}
	else = {
		set_variable = { var = sol_border_porosity_land value = 1 }
	}
	if = {
		limit = { check_variable = { sol_coastal_border_length > 0 } }
		set_variable = { var = sol_porosity_calc_temp value = 1 }
		set_variable = { var = sol_border_porosity_coastal_per_state value = sol_border_porosity_coastal }
		while_loop_effect = {
			limit = { check_variable = { sol_porosity_calc_temp < sol_coastal_border_length } }
			multiply_variable = { var = sol_border_porosity_coastal value = sol_border_porosity_coastal_per_state }
			add_to_variable = { var = sol_porosity_calc_temp value = 1 }
		}
	}
	else = {
		set_variable = { var = sol_border_porosity_coastal value = 1 }
	}
	set_variable = { var = sol_border_porosity value = sol_border_porosity_land }
	multiply_variable = { var = sol_border_porosity value = sol_border_porosity_coastal }

	set_variable = { var = sol_infiltrate_chance value = 1 }
	subtract_from_variable = { var = sol_infiltrate_chance value = sol_border_porosity }
}
SOL_coalition_hrn_collaboration = {
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 0 } 
		}
		every_country = {
			limit = { is_coalition_member = yes }
			remove_ideas = coalition_recognise_hrm_project_bonus_1
			remove_ideas = coalition_recognise_hrm_project_bonus_2
			remove_ideas = coalition_recognise_hrm_project_bonus_3
			remove_ideas = coalition_recognise_hrm_project_bonus_4
			remove_ideas = coalition_recognise_hrm_project_bonus_5
		}
		clear_variable = global.SOL_coalition_hrn_collaboration_var
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 1 } 
		}
		every_country = {
			limit = { is_coalition_member = yes }
			add_ideas = coalition_recognise_hrm_project_bonus_1
			remove_ideas = coalition_recognise_hrm_project_bonus_2
			remove_ideas = coalition_recognise_hrm_project_bonus_3
			remove_ideas = coalition_recognise_hrm_project_bonus_4
			remove_ideas = coalition_recognise_hrm_project_bonus_5
		}
		set_variable = { var = global.SOL_coalition_hrn_collaboration_var value = 5 }
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 2 } 
		}
		every_country = {
			limit = { is_coalition_member = yes }
			remove_ideas = coalition_recognise_hrm_project_bonus_1
			add_ideas = coalition_recognise_hrm_project_bonus_2
			remove_ideas = coalition_recognise_hrm_project_bonus_3
			remove_ideas = coalition_recognise_hrm_project_bonus_4
			remove_ideas = coalition_recognise_hrm_project_bonus_5
		}
		set_variable = { var = global.SOL_coalition_hrn_collaboration_var value = 10 }
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 3 } 
		}
		every_country = {
			limit = { is_coalition_member = yes }
			remove_ideas = coalition_recognise_hrm_project_bonus_1
			remove_ideas = coalition_recognise_hrm_project_bonus_2
			add_ideas = coalition_recognise_hrm_project_bonus_3
			remove_ideas = coalition_recognise_hrm_project_bonus_4
			remove_ideas = coalition_recognise_hrm_project_bonus_5
		}
		set_variable = { var = global.SOL_coalition_hrn_collaboration_var value = 15 }
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 4 } 
		}
		every_country = {
			limit = { is_coalition_member = yes }
			remove_ideas = coalition_recognise_hrm_project_bonus_1
			remove_ideas = coalition_recognise_hrm_project_bonus_2
			remove_ideas = coalition_recognise_hrm_project_bonus_3
			add_ideas = coalition_recognise_hrm_project_bonus_4
			remove_ideas = coalition_recognise_hrm_project_bonus_5
		}
		set_variable = { var = global.SOL_coalition_hrn_collaboration_var value = 20 }
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 5 } 
		}
		every_country = {
			limit = { is_coalition_member = yes }
			remove_ideas = coalition_recognise_hrm_project_bonus_1
			remove_ideas = coalition_recognise_hrm_project_bonus_2
			remove_ideas = coalition_recognise_hrm_project_bonus_3
			remove_ideas = coalition_recognise_hrm_project_bonus_4
			add_ideas = coalition_recognise_hrm_project_bonus_5
		}
		set_variable = { var = global.SOL_coalition_hrn_collaboration_var value = 25 }
	}
}
SOL_anti_daybreaker_attack_bonus = {
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 0 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
			}
			remove_ideas = HRM_harmonic_resistance_idea_1
			remove_ideas = HRM_harmonic_resistance_idea_2
			remove_ideas = HRM_harmonic_resistance_idea_3
			remove_ideas = HRM_harmonic_resistance_idea_4
			remove_ideas = HRM_harmonic_resistance_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 1 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				NOT = { has_idea = HRM_harmonic_resistance_idea_1 }
			}
			add_ideas = HRM_harmonic_resistance_idea_1
			remove_ideas = HRM_harmonic_resistance_idea_2
			remove_ideas = HRM_harmonic_resistance_idea_3
			remove_ideas = HRM_harmonic_resistance_idea_4
			remove_ideas = HRM_harmonic_resistance_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 2 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes 
				NOT = { has_idea = HRM_harmonic_resistance_idea_2 }
			}
			remove_ideas = HRM_harmonic_resistance_idea_1
			add_ideas = HRM_harmonic_resistance_idea_2
			remove_ideas = HRM_harmonic_resistance_idea_3
			remove_ideas = HRM_harmonic_resistance_idea_4
			remove_ideas = HRM_harmonic_resistance_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 3 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				NOT = { has_idea = HRM_harmonic_resistance_idea_3 }
			}
			remove_ideas = HRM_harmonic_resistance_idea_1
			remove_ideas = HRM_harmonic_resistance_idea_2
			add_ideas = HRM_harmonic_resistance_idea_3
			remove_ideas = HRM_harmonic_resistance_idea_4
			remove_ideas = HRM_harmonic_resistance_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 4 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				NOT = { has_idea = HRM_harmonic_resistance_idea_4 }
			}
			remove_ideas = HRM_harmonic_resistance_idea_1
			remove_ideas = HRM_harmonic_resistance_idea_2
			remove_ideas = HRM_harmonic_resistance_idea_3
			add_ideas = HRM_harmonic_resistance_idea_4
			remove_ideas = HRM_harmonic_resistance_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_resistance_strength = 5 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				NOT = { has_idea = HRM_harmonic_resistance_idea_5 }
			}
			remove_ideas = HRM_harmonic_resistance_idea_1
			remove_ideas = HRM_harmonic_resistance_idea_2
			remove_ideas = HRM_harmonic_resistance_idea_3
			remove_ideas = HRM_harmonic_resistance_idea_4
			add_ideas = HRM_harmonic_resistance_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_popular_support = 0 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				has_solar_resistance = yes
			}
			remove_ideas = HRM_solar_loyalists_idea_1
			remove_ideas = HRM_solar_loyalists_idea_2
			remove_ideas = HRM_solar_loyalists_idea_3
			remove_ideas = HRM_solar_loyalists_idea_4
			remove_ideas = HRM_solar_loyalists_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_popular_support = 1 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				has_solar_resistance = yes
				NOT = { has_idea = HRM_solar_loyalists_idea_1 }
			}
			add_ideas = HRM_solar_loyalists_idea_1
			remove_ideas = HRM_solar_loyalists_idea_2
			remove_ideas = HRM_solar_loyalists_idea_3
			remove_ideas = HRM_solar_loyalists_idea_4
			remove_ideas = HRM_solar_loyalists_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_popular_support = 2 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes 
				has_solar_resistance = yes
				NOT = { has_idea = HRM_solar_loyalists_idea_2 }
			}
			remove_ideas = HRM_solar_loyalists_idea_1
			add_ideas = HRM_solar_loyalists_idea_2
			remove_ideas = HRM_solar_loyalists_idea_3
			remove_ideas = HRM_solar_loyalists_idea_4
			remove_ideas = HRM_solar_loyalists_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_popular_support = 3 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				has_solar_resistance = yes
				NOT = { has_idea = HRM_solar_loyalists_idea_3 }
			}
			remove_ideas = HRM_solar_loyalists_idea_1
			remove_ideas = HRM_solar_loyalists_idea_2
			add_ideas = HRM_solar_loyalists_idea_3
			remove_ideas = HRM_solar_loyalists_idea_4
			remove_ideas = HRM_solar_loyalists_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_popular_support = 4 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				has_solar_resistance = yes
				NOT = { has_idea = HRM_solar_loyalists_idea_4 }
			}
			remove_ideas = HRM_solar_loyalists_idea_1
			remove_ideas = HRM_solar_loyalists_idea_2
			remove_ideas = HRM_solar_loyalists_idea_3
			add_ideas = HRM_solar_loyalists_idea_4
			remove_ideas = HRM_solar_loyalists_idea_5
		}
	}
	if = {
		limit = { 
			check_variable = { solar_popular_support = 5 } 
		}
		every_country = {
			limit = { 
				is_solar_breakaway = yes
				has_solar_resistance = yes
				NOT = { has_idea = HRM_solar_loyalists_idea_5 }
			}
			remove_ideas = HRM_solar_loyalists_idea_1
			remove_ideas = HRM_solar_loyalists_idea_2
			remove_ideas = HRM_solar_loyalists_idea_3
			remove_ideas = HRM_solar_loyalists_idea_4
			add_ideas = HRM_solar_loyalists_idea_5
		}
	}
}
SOL_calculate_law_loyalty = {
	set_variable = { var = daybreaker_support_daily_economic_laws value = 0 }
	if = {
		limit = { has_idea = civilian_economy }
		set_variable = { var = daybreaker_support_daily_economic_laws value = 0.02 }
	}
	if = {
		limit = { has_idea = low_economic_mobilisation }
		set_variable = { var = daybreaker_support_daily_economic_laws value = 0 }
	}
	if = {
		limit = { has_idea = partial_economic_mobilisation }
		set_variable = { var = daybreaker_support_daily_economic_laws value = -0.02 }
	}
	if = {
		limit = { has_idea = war_economy }
		set_variable = { var = daybreaker_support_daily_economic_laws value = -0.04 }
	}
	if = {
		limit = { has_idea = tot_economic_mobilisation }
		set_variable = { var = daybreaker_support_daily_economic_laws value = -0.06 }
	}
	if = {
		limit = { has_country_flag = sol_trade_economy_change }
		multiply_variable = { var = daybreaker_support_daily_economic_laws value = 1.5 }
	}
	if = {
		limit = {
			OR = {
				is_under_threat = yes 
				is_ai = yes
			}
		}
		clamp_variable = {
			var = daybreaker_support_daily_economic_laws
			min = 0
		}
	}
	if = {
		limit = {
			has_completed_focus = SOL_remilitarisation
			check_variable = { daybreaker_support_daily_economic_laws < 0 }
		}
		add_to_variable = { var = daybreaker_support_daily_economic_laws value = 0.02 }
		clamp_variable = {
			var = daybreaker_support_daily_economic_laws
			max = 0
		}
	}

	set_variable = { var = daybreaker_support_daily_trade_laws value = 0 }
	if = {
		limit = { has_idea = free_trade }
		set_variable = { var = daybreaker_support_daily_trade_laws value = 0.02 }
	}
	if = {
		limit = { has_idea = export_focus }
		set_variable = { var = daybreaker_support_daily_trade_laws value = 0 }
	}
	if = {
		limit = { has_idea = limited_exports }
		set_variable = { var = daybreaker_support_daily_trade_laws value = -0.02 }
	}
	if = {
		limit = { has_idea = closed_economy }
		set_variable = { var = daybreaker_support_daily_trade_laws value = -0.04 }
	}
	if = {
		limit = { has_country_flag = sol_trade_loyalty_change }
		multiply_variable = { var = daybreaker_support_daily_trade_laws value = 1.5 }
	}
	if = {
		limit = {
			OR = {
				is_under_threat = yes 
				is_ai = yes
			}
		}
		clamp_variable = {
			var = daybreaker_support_daily_trade_laws
			min = 0
		}
	}
	if = {
		limit = {
			has_completed_focus = SOL_remilitarisation
			check_variable = { daybreaker_support_daily_trade_laws < 0 }
		}
		add_to_variable = { var = daybreaker_support_daily_trade_laws value = 0.02 }
		clamp_variable = {
			var = daybreaker_support_daily_trade_laws
			max = 0
		}
	}

	set_variable = { var = daybreaker_support_daily_conscription_laws value = 0 }
	if = {
		limit = { has_idea = disarmed_nation }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = 0.02 }
	}
	if = {
		limit = { has_idea = volunteer_only }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = 0.02 }
	}
	if = {
		limit = { has_idea = limited_conscription }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = 0 }
	}
	if = {
		limit = { has_idea = extensive_conscription }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = -0.02 }
	}
	if = {
		limit = { has_idea = service_by_requirement }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = -0.04 }
	}
	if = {
		limit = { has_idea = all_adults_serve }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = -0.06 }
	}
	if = {
		limit = { has_idea = scraping_the_barrel }
		set_variable = { var = daybreaker_support_daily_conscription_laws value = -0.08 }
	}
	if = {
		limit = { has_country_flag = sol_conscription_loyalty_change }
		multiply_variable = { var = daybreaker_support_daily_conscription_laws value = 1.5 }
	}
	if = {
		limit = {
			OR = {
				is_under_threat = yes 
				is_ai = yes
			}
		}
		clamp_variable = {
			var = daybreaker_support_daily_conscription_laws
			min = 0
		}
	}
	if = {
		limit = {
			has_completed_focus = SOL_remilitarisation
			check_variable = { daybreaker_support_daily_conscription_laws < 0 }
		}
		add_to_variable = { var = daybreaker_support_daily_conscription_laws value = 0.02 }
		clamp_variable = {
			var = daybreaker_support_daily_conscription_laws
			max = 0
		}
	}

	set_variable = { var = daybreaker_support_daily_laws value = 0 }
	add_to_variable = { var = daybreaker_support_daily_laws value = daybreaker_support_daily_economic_laws }
	add_to_variable = { var = daybreaker_support_daily_laws value = daybreaker_support_daily_trade_laws }
	add_to_variable = { var = daybreaker_support_daily_laws value = daybreaker_support_daily_conscription_laws }
}

HRM_damage_states = {
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = arms_factory
				level > 0
			}
		}
		damage_building = {
			type = arms_factory
			damage = 1
		}
	}
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = industrial_complex
				level > 0
			}
		}
		damage_building = {
			type = industrial_complex
			damage = 1
		}
	}
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = infrastructure
				level > 0
			}
		}
		damage_building = {
			type = infrastructure
			damage = 1
		}
		damage_building = {
			type = rail_way
			damage = 1
		}
	}
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = infrastructure
				level > 0
			}
		}
		damage_building = {
			type = infrastructure
			damage = 1
		}
		damage_building = {
			type = rail_way
			damage = 1
		}
	}
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = arms_factory
				level > 0
			}
		}
		damage_building = {
			type = arms_factory
			damage = 1
		}
	}
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = industrial_complex
				level > 0
			}
		}
		damage_building = {
			type = industrial_complex
			damage = 1
		}
		damage_building = {
			type = rail_way
			damage = 1
		}
	}
	random_owned_controlled_state = {
		limit = {
			has_state_flag = sol_hrm_starting_states
			is_owned_and_controlled_by = event_target:solar_empire
			non_damaged_building_level = {
				building = infrastructure
				level > 0
			}
		}
		damage_building = {
			type = infrastructure
			damage = 1
		}
		damage_building = {
			type = rail_way
			damage = 1
		}
	}
}
SOL_calculate_invasion_loyalty = {
	EQS = {
		set_variable = { var = daybreaker_support_daily_invasion value = 0 }
		every_enemy_country = {
			limit = {
				is_neighbor_of = EQS
				is_solar_breakaway = no
				if = {
					limit = { has_global_flag = coalition_supporting_the_hrm }
					is_coalition_member = no
				}
				has_offensive_war_with = EQS
			}
			EQS = { 
				set_temp_variable = { var = sol_invasion_loyalty_daily_temp value = 0.005 } 
				if = {
					limit = { 
						PREV = {
							OR = {
								tag = CHN
								tag = CRY
								tag = STG
								tag = NLR
								is_river_fed_member = yes
								tag = GRD
								tag = GRI
								tag = WNG
								tag = JER
								tag = RCT
								tag = LCT
								num_of_controlled_states > 40
								strength_ratio = {
									tag = EQS
									ratio > 0.6
								}
								AND = {
									strength_ratio = {
										tag = EQS
										ratio > 0.4
									}
									EQS = { surrender_progress > 0.2 }
								}
								AND = {
									strength_ratio = {
										tag = EQS
										ratio > 0.4
									}
									any_allied_country = {
										strength_ratio = {
											tag = EQS
											ratio > 0.3
										}
									}
								}
							}
						}
					}
					multiply_temp_variable = { var = sol_invasion_loyalty_daily_temp value = 2 }
				}
				if = {
					limit = { 
						PREV = {
							sol_is_oppressive_nation = yes
						}
					}
					multiply_temp_variable = { var = sol_invasion_loyalty_daily_temp value = 1.5 }
				}
				if = {
					limit = { 
						PREV = {
							has_government = democratic
						}
					}
					multiply_temp_variable = { var = sol_invasion_loyalty_daily_temp value = 0.5 }
				}
				if = {
					limit = {
						PREV = {
							NOT = { has_country_flag = sol_recent_attacker }
						}
					}
					multiply_temp_variable = { var = sol_invasion_loyalty_daily_temp value = 0.5 }
				}
				if = {
					limit = { 
						PREV = {
							is_pony_race = no
						}
					}
					multiply_temp_variable = { var = sol_invasion_loyalty_daily_temp value = 2 }
				}
				add_to_variable = { var = daybreaker_support_daily_invasion value = sol_invasion_loyalty_daily_temp } 
			}
		}
		clamp_variable = {
			var = daybreaker_support_daily_invasion
			min = 0
			max = 0.1
		}
		set_temp_variable = { var = daybreaker_support_daily_invasion_multiplier value = EQS.surrender_progress }
		add_to_temp_variable = { var = daybreaker_support_daily_invasion_multiplier value = 0.9 }
		multiply_variable = { var = daybreaker_support_daily_invasion value = daybreaker_support_daily_invasion_multiplier } 
	}
}
SOL_war_of_the_eclipse_ending_effects = {
	if = {
		limit = { has_country_flag = SOL_martial_law_active }
		add_to_variable = { daybreaker_support_daily_actions = 0.02 }
		clr_country_flag = SOL_martial_law_active
	}
	if = {
		limit = { has_country_flag = SOL_indiscriminate_bombardment_active }
		add_to_variable = { daybreaker_support_daily_actions = 0.02 }
		set_technology = { popup = no tech_indiscriminate_bombardment = 0 }
		clr_country_flag = SOL_indiscriminate_bombardment_active
	}
	if = {
		limit = { has_country_flag = SOL_scorched_earth_active }
		add_to_variable = { daybreaker_support_daily_actions = 0.02 }
		clr_country_flag = SOL_scorched_earth_active
	}
	if = {
		limit = { has_country_flag = SOL_indiscriminate_bombardment_active }
		add_to_variable = { daybreaker_support_daily_actions = 0.02 }
		remove_ideas = SOL_seize_resources_idea
		clr_country_flag = SOL_indiscriminate_bombardment_active
	}
	remove_ideas = SOL_to_the_bitter_end_idea
	hidden_effect = {
		set_variable = { var = solar_resistance_cohesion_actions value = 1 }
		set_country_flag = sol_resistance_decapitated
		hidden_effect = { mark_focus_tree_layout_dirty = yes }
		every_state ={
			clr_state_flag = resistance_attack_dummy_target
			clr_state_flag = resistance_attack_true_target
		}
		clear_array = EQS.SOL_resistance_attack_target_array
		clr_country_flag = SOL_has_ongoing_attack
		remove_mission = SOL_resistance_attack
		clr_country_flag = SOL_has_ongoing_cohesion
		remove_mission = SOL_resistance_cohesion
	}
}