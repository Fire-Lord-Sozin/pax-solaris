ideas = {
	country = {
		SOL_coalition_member = {
			picture = coalition_member
			available = {
				is_in_faction = yes
				var:faction_leader = {
					is_coalition_member = yes
				}
			}
			removal_cost = -1
			allowed = {
				always = no
			}
		}
	}
	country = {
		coalition_defensive_plan_project_commitment = {
			picture = CZE_planning_bonus
			available = {
				is_in_faction = yes
				var:faction_leader = {
					is_coalition_member = yes
				}
			}
			on_add = {
				if = {
					limit = {
						NOT = { check_variable = { global.coalition_defensive_plan_project_commitment_num > 4 } }
					}
					add_to_variable = { var = global.coalition_defensive_plan_project_commitment_num value = 1 }
				}
			}
			on_remove = {
				add_to_variable = { var = global.coalition_defensive_plan_project_commitment_num_completed value = 1 }
				if = {
					limit = {
						check_variable = { global.coalition_defensive_plan_project_commitment_num_completed > 4 }
					}
					clear_variable = global.coalition_defensive_plan_project_commitment_num
					clear_variable = global.coalition_defensive_plan_project_commitment_num_completed
					every_country = {
						limit = {
							is_coalition_member = yes
						}
						add_ideas = coalition_defensive_plan_project_bonus
					}
					clr_global_flag = coalition_ongoing_project
					clr_global_flag = coalition_defensive_plan_accepted
					set_global_flag = coalition_defensive_plan_completed
				}
			}
			removal_cost = -1
			allowed = {
				always = no
			}
			modifier = {
				max_planning_factor = -0.3
				planning_speed = -0.2
			}
		}
	}
	country = {
		coalition_fortress_project_commitment = {
			picture = generic_wall_line
			available = {
				is_in_faction = yes
				var:faction_leader = {
					is_coalition_member = yes
				}
			}
			on_add = {
				if = {
					limit = {
						NOT = { check_variable = { global.coalition_fortress_project_commitment_num > 4 } }
					}
					add_to_variable = { var = global.coalition_fortress_project_commitment_num value = 1 }
				}
			}
			on_remove = {
				add_to_variable = { var = global.coalition_fortress_project_commitment_num_completed value = 1 }
				if = {
					limit = {
						check_variable = { global.coalition_fortress_project_commitment_num_completed > 4 }
					}
					clear_variable = global.coalition_fortress_project_commitment_num
					clear_variable = global.coalition_fortress_project_commitment_num_completed
					every_state = {
						limit = {
							any_neighbor_state = { is_owned_by = EQS }
							owner = {
								is_coalition_member = yes
							}
						}
						add_building_construction = {
							type = bunker
							level = 2
							instant_build = yes
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
						}
					}
					clr_global_flag = coalition_ongoing_project
					clr_global_flag = coalition_fortress_accepted
					set_global_flag = coalition_fortress_completed
				}
			}
			removal_cost = -1
			allowed = {
				always = no
			}
			modifier = {
				civilian_factory_use = 10
			}
		}
	}
	hidden_ideas = {
		SOL_coalition_surrender = {
			picture = generic_exploit_mines

			allowed = {
				always = no
			}
			available = {
				is_coalition_member = yes
				is_faction_leader = yes
				any_allied_country = {
					has_capitulated = no
				}
			}
			removal_cost = -1

			modifier = {
				surrender_limit = 1
			}
		}
		coalition_defensive_plan_project_bonus = {
			picture = coalition_member
			available = {
				is_in_faction = yes
				is_coalition_member = yes
			}
			removal_cost = -1
			allowed = {
				always = no
			}
			modifier = {
				max_planning = 0.1
			}
			targeted_modifier = {
				tag = EQS
				defense_bonus_against = 0.1
			}
		}
	}
}