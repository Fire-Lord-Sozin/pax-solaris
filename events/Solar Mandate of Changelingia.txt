add_namespace = smc

country_event = {
	id = smc.1
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event smc.1" 
		hidden_effect = {
			EQS = {
				set_country_flag = sol_released_smc
				set_country_flag = sol_released_smv
			}
			every_state = {
				limit = {
					OR = {
						state = 316
						state = 319
						state = 247
						state = 246
						state = 291
					}
				}
				EQS = { add_to_variable = { SOL_public_works_num_states^PREV.SOL_public_works_region_id = -1 } }
				clear_variable = SOL_public_works_region_id
			}
		}
	}
	title = smc.1.t
	desc = smc.1.d
	picture = GFX_event_solar_flare
	is_triggered_only = yes
	option = {
		name = smc.1.a
		ai_chance = { 
			factor = 1
		}
		custom_effect_tooltip = SOL_CHN_mandate_tt
		hidden_effect = {
			if = {
				limit = { SMC = { exists = no } }
				SOL_SMC_add_cores = yes
				puppet = SMC
				EQS_prince_blueblood = {
					remove_country_leader_role = { ideology = despotism }
					remove_advisor_role = { slot = political_advisor }
					set_portraits = {
						civilian = {
							large = "gfx/leaders/SOL/Prince_Blueblood.tga"
						}
						army = {
							large = "gfx/leaders/SOL/Prince_Blueblood.tga"
							small = GFX_idea_prince_blueblood
						}
					}
					add_country_leader_role = {
						country_leader = {
							expire="1965.1.1.1"
							ideology = nazism
							desc = "SOL_BLUEBLOOD_DESC"
						}
					}
					set_nationality = SMC
				}
				EQS = { SMC = { transfer_technology = yes } }
				SMC = {
					add_popularity = {
					    ideology = fascism
					    popularity = 1
					}
					promote_character = EQS_prince_blueblood
				}
			}
			if = {
				limit = { SMV = { exists = no } }
				SOL_SMV_add_cores = yes
				puppet = SMV
				EQS_SOL_lightning_dust = {
					remove_advisor_role = { slot = high_command }
					set_nationality = SMV
				}
				EQS = { SMV = { transfer_technology = yes } }
				SMV = {
					add_popularity = {
					    ideology = fascism
					    popularity = 1
					}
					promote_character = EQS_SOL_lightning_dust
				}
			}
		}
	}
}